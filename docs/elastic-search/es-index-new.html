<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elasticsearchç´¢å¼•ç®¡ç†ä¸ç´¢å¼•æ¨¡æ¿è¯¦è§£</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --primary-color: #007C89;
            --secondary-color: #00A5BE;
            --dark-color: #212529;
            --light-color: #F8F9FA;
            --accent-color: #FF5C35;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", sans-serif;
            color: var(--dark-color);
        }
        .sidebar {
            background-color: #f5f5f7;
            border-right: 1px solid #e0e0e0;
            height: 100vh;
            position: sticky;
            top: 0;
            overflow-y: auto;
        }
        .content {
            max-width: 1000px;
            margin: 0 auto;
        }
        .toc-link {
            color: #333;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            padding-left: 1rem;
        }
        .toc-link:hover, .toc-link.active {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            background-color: rgba(0,124,137,0.05);
        }
        .toc-sub {
            margin-left: 1.5rem;
            font-size: 0.9rem;
        }
        .mermaid {
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        code {
            background-color: #f0f0f0;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            font-size: 0.9em;
        }
        pre code {
            display: block;
            padding: 1rem;
            overflow-x: auto;
            background-color: #f8f8f8;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 1rem;
            margin: 1rem 0;
            color: #555;
            font-style: italic;
        }
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                z-index: 50;
                width: 80%;
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            .sidebar.open {
                transform: translateX(0);
            }
            .menu-toggle {
                display: block !important;
            }
        }
    /* è¿”å›é¦–é¡µæŒ‰é’®æ ·å¼ */
        .home-button-fixed {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.2s;
        }
        .home-button-fixed:hover {
            background-color: #2980b9;
            transform: translateY(-50%) translateX(2px);
        }
        .home-button-fixed svg {
            width: 20px;
            height: 20px;
        }
        @media (max-width: 768px) {
            .home-button-fixed {
                top: 50%;
                left: 10px;
                width: 36px;
                height: 36px;
            }
            .home-button-fixed svg {
                width: 18px;
                height: 18px;
            }
        }</style>
</head>
<body class="bg-gray-50"><a href="../index.html" class="home-button-fixed" title="è¿”å›é¦–é¡µ"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></a>
    <div class="flex flex-col md:flex-row">
        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle fixed top-4 left-4 z-50 bg-white p-2 rounded-md shadow-md md:hidden" onclick="document.querySelector('.sidebar').classList.toggle('open')">
            <i class="fas fa-bars text-gray-700"></i>
        </button>
      
        <!-- Sidebar -->
        <aside class="sidebar w-full md:w-64 p-4">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-800">ğŸ“‘ ç›®å½•</h2>
                <button class="md:hidden" onclick="document.querySelector('.sidebar').classList.remove('open')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="toc">
                <div class="mb-2">
                    <a href="#intro" class="toc-link block py-2 rounded hover:bg-gray-100">ğŸ“Œ å¼•è¨€</a>
                </div>
              
                <div class="mb-4">
                    <div class="font-bold mb-2 text-gray-600">ç¬¬ä¸€éƒ¨åˆ†ï¼šç´¢å¼•ç®¡ç†è¯¦è§£</div>
                    <a href="#index-concept" class="toc-link block py-2 rounded">1. ç´¢å¼•æ¦‚å¿µä¸æ¶æ„</a>
                    <a href="#index-lifecycle" class="toc-link block py-2 rounded">2. ç´¢å¼•çš„ç”Ÿå‘½å‘¨æœŸ</a>
                    <a href="#index-settings" class="toc-link block py-2 rounded">3. ç´¢å¼•è®¾ç½®è¯¦è§£</a>
                    <a href="#index-api" class="toc-link block py-2 rounded">4. ç´¢å¼•ç®¡ç†API</a>
                    <a href="#index-alias" class="toc-link block py-2 rounded">5. ç´¢å¼•åˆ«åç®¡ç†</a>
                    <a href="#index-best-practices" class="toc-link block py-2 rounded">6. ç´¢å¼•ç®¡ç†æœ€ä½³å®è·µ</a>
                </div>
              
                <div class="mb-4">
                    <div class="font-bold mb-2 text-gray-600">ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•æ¨¡æ¿è¯¦è§£</div>
                    <a href="#template-concept" class="toc-link block py-2 rounded">1. ç´¢å¼•æ¨¡æ¿æ¦‚å¿µ</a>
                    <a href="#template-types" class="toc-link block py-2 rounded">2. ç´¢å¼•æ¨¡æ¿ç±»å‹</a>
                    <a href="#component-templates" class="toc-link block py-2 rounded">3. ç»„ä»¶æ¨¡æ¿è¯¦è§£</a>
                    <a href="#index-templates" class="toc-link block py-2 rounded">4. ç´¢å¼•æ¨¡æ¿é…ç½®</a>
                    <a href="#template-priority" class="toc-link block py-2 rounded">5. æ¨¡æ¿ä¼˜å…ˆçº§ä¸åŒ¹é…</a>
                    <a href="#template-examples" class="toc-link block py-2 rounded">6. å®æˆ˜æ¡ˆä¾‹</a>
                    <a href="#template-best-practices" class="toc-link block py-2 rounded">7. æ¨¡æ¿ç®¡ç†æœ€ä½³å®è·µ</a>
                </div>
              
                <div>
                    <a href="#conclusion" class="toc-link block py-2 rounded">ğŸ¯ æ€»ç»“</a>
                </div>
            </nav>
        </aside>
      
        <!-- Main Content -->
        <main class="content flex-1 p-6 md:p-8">
            <header class="mb-10">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Elasticsearchç´¢å¼•ç®¡ç†ä¸ç´¢å¼•æ¨¡æ¿è¯¦è§£</h1>
                <div class="flex items-center text-gray-600">
                    <span class="mr-4"><i class="far fa-calendar-alt mr-1"></i> 2023-10-15</span>
                    <span class="mr-4"><i class="far fa-clock mr-1"></i> 15 åˆ†é’Ÿé˜…è¯»</span>
                    <span><i class="fas fa-tag mr-1"></i> Elasticsearch, ç´¢å¼•, æ¨¡æ¿</span>
                </div>
            </header>
          
            <section id="intro" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">ğŸ“Œ å¼•è¨€</h2>
                <p class="mb-4">åœ¨Elasticsearchç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œç´¢å¼•æ˜¯æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒå†³å®šäº†æ•°æ®å¦‚ä½•å­˜å‚¨ã€æŸ¥è¯¢å’Œä¼˜åŒ–ã€‚ç†è§£ç´¢å¼•ç®¡ç†å’Œç´¢å¼•æ¨¡æ¿å¯¹äºæ„å»ºé«˜æ•ˆä¸”å¯æ‰©å±•çš„Elasticsearché›†ç¾¤è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ç´¢å¼•ç®¡ç†çš„å„ä¸ªæ–¹é¢ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ç´¢å¼•æ¨¡æ¿å®ç°è‡ªåŠ¨åŒ–å’Œæ ‡å‡†åŒ–çš„ç´¢å¼•åˆ›å»ºæµç¨‹ã€‚</p>
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r">
                    <p class="text-blue-800">æœ¬æ–‡åŸºäºElasticsearch 7.xç‰ˆæœ¬ï¼Œéƒ¨åˆ†åŠŸèƒ½åœ¨å…¶ä»–ç‰ˆæœ¬ä¸­å¯èƒ½æœ‰æ‰€ä¸åŒã€‚ç‰¹åˆ«æ˜¯ç´¢å¼•æ¨¡æ¿APIåœ¨7.8ç‰ˆæœ¬åè¿›è¡Œäº†è¾ƒå¤§æ”¹è¿›ã€‚</p>
                </div>
            </section>
          
            <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šç´¢å¼•ç®¡ç†è¯¦è§£ -->
            <section id="index-concept" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ” 1. ç´¢å¼•æ¦‚å¿µä¸æ¶æ„</h2>
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.1 ä»€ä¹ˆæ˜¯ç´¢å¼•</h3>
                <p class="mb-4">åœ¨Elasticsearchä¸­ï¼Œç´¢å¼•æ˜¯æ–‡æ¡£çš„é›†åˆï¼Œç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ã€‚æ¯ä¸ªç´¢å¼•åŒ…å«äº†ä¸€ç»„å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„æ–‡æ¡£ï¼Œå¹¶æä¾›äº†æŸ¥è¯¢å’Œæ£€ç´¢è¿™äº›æ–‡æ¡£çš„èƒ½åŠ›ã€‚ç´¢å¼•çš„åç§°å¿…é¡»æ˜¯å°å†™å­—æ¯ï¼Œä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚</p>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.2 ç´¢å¼•åœ¨Elasticsearchä¸­çš„è§’è‰²</h3>
                <p class="mb-4">ç´¢å¼•åœ¨Elasticsearchä¸­æ‰®æ¼”ç€æ•°æ®ç»„ç»‡å’Œè®¿é—®çš„æ ¸å¿ƒè§’è‰²ã€‚å®ƒæä¾›äº†ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>æ–‡æ¡£çš„é€»è¾‘ç»„ç»‡å’Œå½’ç±»</li>
                    <li>ä¼˜åŒ–æŸ¥è¯¢çš„æ€§èƒ½</li>
                    <li>é’ˆå¯¹ç‰¹å®šæ•°æ®ç±»å‹çš„åˆ†æå’Œæœç´¢åŠŸèƒ½</li>
                    <li>æ•°æ®åˆ†ç‰‡å’Œå¤åˆ¶ç­–ç•¥çš„å®ç°åŸºç¡€</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.3 ç´¢å¼•çš„å†…éƒ¨ç»“æ„</h3>
                <p class="mb-4">Elasticsearchç´¢å¼•ç”±ä»¥ä¸‹ç»„ä»¶ç»„æˆï¼š</p>
              
                <div class="mermaid my-6">
                    graph TD
                    A[ç´¢å¼• Index] --> B[åˆ†ç‰‡ Shard]
                    B --> C[ä¸»åˆ†ç‰‡ Primary Shard]
                    B --> D[å‰¯æœ¬åˆ†ç‰‡ Replica Shard]
                    A --> E[æ˜ å°„ Mapping]
                    A --> F[è®¾ç½® Settings]
                    A --> G[åˆ«å Aliases]
                </div>
              
                <p class="mb-4">æ¯ä¸ªç´¢å¼•è¢«åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç‰‡ï¼Œåˆ†ç‰‡æ˜¯Elasticsearchåˆ†å¸ƒå¼æ¶æ„çš„æ ¸å¿ƒã€‚åˆ†ç‰‡æœ‰ä¸¤ç§ç±»å‹ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>ä¸»åˆ†ç‰‡(Primary Shard)</strong>ï¼šæ¯ä¸ªæ–‡æ¡£å­˜å‚¨åœ¨ä¸€ä¸ªä¸»åˆ†ç‰‡ä¸­ï¼Œä¸»åˆ†ç‰‡æ•°é‡åœ¨ç´¢å¼•åˆ›å»ºåä¸å¯æ›´æ”¹</li>
                    <li><strong>å‰¯æœ¬åˆ†ç‰‡(Replica Shard)</strong>ï¼šä¸»åˆ†ç‰‡çš„å¤åˆ¶å“ï¼Œæä¾›é«˜å¯ç”¨æ€§å’Œè¯»å–æ€§èƒ½</li>
                </ul>
              
                <blockquote class="bg-yellow-50 p-4 rounded mb-6">
                    <p>ä¸»åˆ†ç‰‡æ•°é‡å†³å®šäº†ç´¢å¼•å¯ä»¥å­˜å‚¨çš„æœ€å¤§æ•°æ®é‡ã€‚è¿‡å¤šçš„ä¸»åˆ†ç‰‡ä¼šå¯¼è‡´å°åˆ†ç‰‡é—®é¢˜ï¼Œè€Œè¿‡å°‘åˆ™é™åˆ¶äº†æ¨ªå‘æ‰©å±•èƒ½åŠ›ã€‚</p>
                </blockquote>
            </section>
          
            <section id="index-lifecycle" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">â±ï¸ 2. ç´¢å¼•çš„ç”Ÿå‘½å‘¨æœŸ</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.1 åˆ›å»ºç´¢å¼•</h3>
                <p class="mb-4">åˆ›å»ºç´¢å¼•å¯ä»¥é€šè¿‡æ˜¾å¼åˆ›å»ºæˆ–åœ¨ç´¢å¼•ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼ˆå‰ææ˜¯å…è®¸è‡ªåŠ¨åˆ›å»ºï¼‰ã€‚æ˜¾å¼åˆ›å»ºç´¢å¼•å…è®¸å®šåˆ¶ç´¢å¼•çš„å„ç§å‚æ•°ï¼š</p>
              
                <pre><code>{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "field1": { "type": "text" },
      "field2": { "type": "keyword" },
      "field3": { "type": "date" }
    }
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.2 æ‰“å¼€/å…³é—­ç´¢å¼•</h3>
                <p class="mb-4">ç´¢å¼•å¯ä»¥ä¸´æ—¶å…³é—­ä»¥å‡å°‘é›†ç¾¤è´Ÿæ‹…ï¼Œå…³é—­çš„ç´¢å¼•ä¸æ¥å—è¯»å†™æ“ä½œï¼Œä½†ä»å ç”¨å°‘é‡èµ„æºï¼š</p>
              
                <pre><code># å…³é—­ç´¢å¼•
POST /my_index/_close

# æ‰“å¼€ç´¢å¼•
POST /my_index/_open</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.3 æ›´æ–°ç´¢å¼•è®¾ç½®</h3>
                <p class="mb-4">æœ‰äº›ç´¢å¼•è®¾ç½®å¯ä»¥åœ¨åˆ›å»ºååŠ¨æ€æ›´æ–°ï¼Œä¾‹å¦‚å‰¯æœ¬æ•°é‡ï¼š</p>
              
                <pre><code>PUT /my_index/_settings
{
  "index": {
    "number_of_replicas": 2
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.4 åˆ é™¤ç´¢å¼•</h3>
                <p class="mb-4">å½“ç´¢å¼•ä¸å†éœ€è¦æ—¶ï¼Œå¯ä»¥å°†å…¶åˆ é™¤ã€‚è¿™æ˜¯ä¸€ä¸ªä¸å¯é€†æ“ä½œï¼Œä¼šæ°¸ä¹…åˆ é™¤ç´¢å¼•ä¸­çš„æ‰€æœ‰æ•°æ®ï¼š</p>
              
                <pre><code>DELETE /my_index</code></pre>
              
                <div class="mermaid my-6">
                    graph LR
                    A[åˆ›å»ºç´¢å¼•] --> B[ç´¢å¼•æ´»è·ƒ]
                    B --> C[å…³é—­ç´¢å¼•]
                    C --> B
                    B --> D[æ›´æ–°è®¾ç½®]
                    D --> B
                    B --> E[åˆ é™¤ç´¢å¼•]
                </div>
            </section>
          
            <section id="index-settings" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">âš™ï¸ 3. ç´¢å¼•è®¾ç½®è¯¦è§£</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.1 é™æ€è®¾ç½®</h3>
                <p class="mb-4">é™æ€è®¾ç½®åªèƒ½åœ¨ç´¢å¼•åˆ›å»ºæ—¶è®¾ç½®ï¼Œä¹‹åä¸å¯æ›´æ”¹ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><code>index.number_of_shards</code>ï¼šä¸»åˆ†ç‰‡æ•°é‡</li>
                    <li><code>index.codec</code>ï¼šæ•°æ®å‹ç¼©æ–¹å¼</li>
                    <li><code>index.routing_partition_size</code>ï¼šè·¯ç”±åˆ†åŒºå¤§å°</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.2 åŠ¨æ€è®¾ç½®</h3>
                <p class="mb-4">åŠ¨æ€è®¾ç½®å¯ä»¥åœ¨ç´¢å¼•åˆ›å»ºåä¿®æ”¹ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><code>index.number_of_replicas</code>ï¼šå‰¯æœ¬åˆ†ç‰‡æ•°é‡</li>
                    <li><code>index.refresh_interval</code>ï¼šåˆ·æ–°é—´éš”ï¼Œå½±å“æ•°æ®å¯¹æœç´¢çš„å¯è§æ€§</li>
                    <li><code>index.max_result_window</code>ï¼šåˆ†é¡µæŸ¥è¯¢çš„æœ€å¤§é™åˆ¶</li>
                    <li><code>index.blocks.*</code>ï¼šç´¢å¼•æ“ä½œçš„å„ç§é™åˆ¶</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.3 åˆ†æå™¨è®¾ç½®</h3>
                <p class="mb-4">åˆ†æå™¨è®¾ç½®å®šä¹‰äº†æ–‡æœ¬å¦‚ä½•è¢«å¤„ç†å’Œç´¢å¼•ï¼š</p>
              
                <pre><code>PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_custom_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [ "lowercase", "my_stemmer" ]
        }
      },
      "filter": {
        "my_stemmer": {
          "type": "stemmer",
          "language": "english"
        }
      }
    }
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.4 æ˜ å°„è®¾ç½®</h3>
                <p class="mb-4">æ˜ å°„å®šä¹‰äº†æ–‡æ¡£åŠå…¶å­—æ®µå¦‚ä½•å­˜å‚¨å’Œç´¢å¼•ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><code>dynamic</code>ï¼šæ§åˆ¶æ˜¯å¦è‡ªåŠ¨æ·»åŠ æ–°å­—æ®µ</li>
                    <li><code>_source</code>ï¼šæ˜¯å¦å­˜å‚¨åŸå§‹æ–‡æ¡£</li>
                    <li><code>properties</code>ï¼šå­—æ®µå®šä¹‰</li>
                </ul>
            </section>
          
            <section id="index-api" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ”§ 4. ç´¢å¼•ç®¡ç†API</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.1 åˆ›å»ºç´¢å¼•API</h3>
                <pre><code>PUT /my_new_index
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "title": { "type": "text" },
      "content": { "type": "text" },
      "date": { "type": "date" }
    }
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.2 è·å–ç´¢å¼•ä¿¡æ¯</h3>
                <pre><code># è·å–ç‰¹å®šç´¢å¼•ä¿¡æ¯
GET /my_index

# è·å–å¤šä¸ªç´¢å¼•
GET /index1,index2

# è·å–æ‰€æœ‰ç´¢å¼•
GET /_cat/indices?v

# æŸ¥çœ‹ç´¢å¼•åˆ†ç‰‡åˆ†é…
GET /_cat/shards?v</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.3 ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯</h3>
                <pre><code># è·å–å•ä¸ªç´¢å¼•ç»Ÿè®¡
GET /my_index/_stats

# è·å–ç‰¹å®šç»Ÿè®¡é¡¹
GET /my_index/_stats/search,indexing</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.4 ç´¢å¼•æ®µç®¡ç†</h3>
                <p class="mb-4">æ®µæ˜¯Luceneä¸­æœ€å°çš„ç´¢å¼•å•ä½ï¼Œäº†è§£å’Œç®¡ç†æ®µå¯¹ä¼˜åŒ–æ€§èƒ½å¾ˆé‡è¦ï¼š</p>
              
                <pre><code># æŸ¥çœ‹æ®µä¿¡æ¯
GET /my_index/_segments

# å¼ºåˆ¶åˆå¹¶æ®µ
POST /my_index/_forcemerge
{
  "max_num_segments": 1
}</code></pre>
              
                <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 my-6 rounded-r">
                    <p class="text-yellow-800"><strong>æ³¨æ„</strong>ï¼šå¼ºåˆ¶åˆå¹¶ä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼Œåº”åœ¨ä½å³°æœŸè¿›è¡Œï¼Œå°¤å…¶æ˜¯è®¾ç½®max_num_segmentsä¸º1æ—¶ã€‚</p>
                </div>
            </section>
          
            <section id="index-alias" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ”„ 5. ç´¢å¼•åˆ«åç®¡ç†</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.1 ä»€ä¹ˆæ˜¯ç´¢å¼•åˆ«å</h3>
                <p class="mb-4">ç´¢å¼•åˆ«åæ˜¯æŒ‡å‘ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•çš„è™šæ‹Ÿåç§°ï¼Œé€šè¿‡åˆ«åå¯ä»¥å®ç°ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>æ— ç¼åˆ‡æ¢ç´¢å¼•ï¼ˆé›¶åœæœºé‡å»ºç´¢å¼•ï¼‰</li>
                    <li>åˆ›å»ºç´¢å¼•è§†å›¾ï¼ˆé’ˆå¯¹ä¸åŒç”¨ä¾‹ä¼˜åŒ–æŸ¥è¯¢ï¼‰</li>
                    <li>ç®€åŒ–ç´¢å¼•ç®¡ç†ï¼ˆå°¤å…¶æ˜¯æ—¶é—´åºåˆ—æ•°æ®ï¼‰</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.2 åˆ›å»ºå’Œç®¡ç†åˆ«å</h3>
                <pre><code># æ·»åŠ åˆ«å
POST /_aliases
{
  "actions": [
    { "add": { "index": "my_index", "alias": "my_alias" } }
  ]
}

# åˆ é™¤åˆ«å
POST /_aliases
{
  "actions": [
    { "remove": { "index": "my_index", "alias": "my_alias" } }
  ]
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.3 å¸¦è¿‡æ»¤æ¡ä»¶çš„åˆ«å</h3>
                <p class="mb-4">åˆ«åå¯ä»¥åŒ…å«è¿‡æ»¤æ¡ä»¶ï¼Œåˆ›å»ºæ•°æ®çš„é€»è¾‘è§†å›¾ï¼š</p>
              
                <pre><code>POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "logs",
        "alias": "error_logs",
        "filter": { "term": { "level": "error" } }
      }
    }
  ]
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.4 å†™å…¥ç´¢å¼•åˆ«å</h3>
                <p class="mb-4">å¯ä»¥æŒ‡å®šå•ä¸ªå†™å…¥ç´¢å¼•ï¼Œå®ç°å†™å…¥é‡å®šå‘ï¼š</p>
              
                <pre><code>POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "logs-current",
        "alias": "logs-write",
        "is_write_index": true
      }
    },
    {
      "add": {
        "index": "logs-old",
        "alias": "logs-write"
      }
    }
  ]
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.5 é›¶åœæœºç´¢å¼•è¿ç§»</h3>
                <div class="mermaid my-6">
                    graph TD
                    A[åˆ›å»ºæ–°ç´¢å¼•] --> B[é‡å»ºæ•°æ®åˆ°æ–°ç´¢å¼•]
                    B --> C[åŸå­åˆ‡æ¢åˆ«å]
                    C --> D[éªŒè¯æ–°ç´¢å¼•]
                    D --> E[åˆ é™¤æ—§ç´¢å¼•]
                </div>
              
                <pre><code># åŸå­åˆ‡æ¢åˆ«å
POST /_aliases
{
  "actions": [
    { "remove": { "index": "old_index", "alias": "my_app" } },
    { "add": { "index": "new_index", "alias": "my_app" } }
  ]
}</code></pre>
            </section>
          
            <section id="index-best-practices" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸŒŸ 6. ç´¢å¼•ç®¡ç†æœ€ä½³å®è·µ</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.1 åˆ†ç‰‡è§„åˆ’ç­–ç•¥</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>æ¯ä¸ªåˆ†ç‰‡ç†æƒ³å¤§å°ä¸º20GB-40GB</li>
                    <li>åˆ†ç‰‡æ•°é‡åº”è¯¥æ˜¯èŠ‚ç‚¹æ•°é‡çš„æ•´æ•°å€</li>
                    <li>é¿å…è¿‡åº¦åˆ†ç‰‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†ç‰‡æ•°ä¸è¶…è¿‡20-25ä¸ª</li>
                    <li>è€ƒè™‘æœªæ¥é›†ç¾¤æ‰©å±•éœ€æ±‚</li>
                </ul>
              
                <pre><code>PUT /optimal_index
{
  "settings": {
    "number_of_shards": 3,    // é€‚åˆ3-6èŠ‚ç‚¹é›†ç¾¤
    "number_of_replicas": 1   // æ¯ä»½æ•°æ®æœ‰2ä¸ªå‰¯æœ¬(1ä¸»1å‰¯)
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.2 ç´¢å¼•æ»šåŠ¨ç­–ç•¥</h3>
                <p class="mb-4">å¯¹äºæ—¶é—´åºåˆ—æ•°æ®ï¼Œä½¿ç”¨ILM(Index Lifecycle Management)å’Œæ»šåŠ¨ç´¢å¼•ï¼š</p>
              
                <pre><code>PUT _ilm/policy/logs_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "50GB",
            "max_age": "7d"
          }
        }
      },
      "warm": {
        "min_age": "30d",
        "actions": {
          "shrink": {
            "number_of_shards": 1
          },
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "cold": {
        "min_age": "60d",
        "actions": {
          "freeze": {}
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.3 æ˜ å°„ä¼˜åŒ–</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>ç¦ç”¨ä¸éœ€è¦çš„å­—æ®µç´¢å¼•: <code>"index": false</code></li>
                    <li>ä½¿ç”¨é€‚å½“çš„æ•°æ®ç±»å‹ï¼Œç‰¹åˆ«æ˜¯æ—¥æœŸå’Œæ•°å­—</li>
                    <li>å¯¹äºå¤§æ–‡æœ¬å­—æ®µè€ƒè™‘ä½¿ç”¨ <code>text</code> + <code>keyword</code> å¤šå­—æ®µ</li>
                    <li>å¯¹äºåˆ†æç”¨ä¾‹ï¼Œè€ƒè™‘ç¦ç”¨ <code>_source</code> æˆ–ä½¿ç”¨ <code>source_includes/excludes</code></li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.4 ç´¢å¼•ç›‘æ§ä¸ç»´æŠ¤</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>å®šæœŸç›‘æ§ç´¢å¼•å¤§å°å’Œåˆ†ç‰‡åˆ†å¸ƒ</li>
                    <li>ä½¿ç”¨ <code>_cat/indices?v</code> å’Œ <code>_cat/shards?v</code> API</li>
                    <li>å…³æ³¨ç´¢å¼•å¥åº·çŠ¶æ€(ç»¿è‰²/é»„è‰²/çº¢è‰²)</li>
                    <li>ä½¿ç”¨Elasticsearch Exporter + Prometheus + Grafanaå»ºç«‹ç›‘æ§ä½“ç³»</li>
                </ul>
              
                <div class="bg-green-50 border-l-4 border-green-500 p-4 my-6 rounded-r">
                    <p class="text-green-800"><strong>æœ€ä½³å®è·µ</strong>ï¼šä¸ºç”Ÿäº§ç¯å¢ƒç´¢å¼•è‡³å°‘é…ç½®1ä¸ªå‰¯æœ¬ï¼Œç¡®ä¿æ•°æ®é«˜å¯ç”¨æ€§ï¼›åŒæ—¶å®šæœŸå¤‡ä»½ç´¢å¼•å¿«ç…§åˆ°è¿œç¨‹ä»“åº“ã€‚</p>
                </div>
            </section>
          
            <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•æ¨¡æ¿è¯¦è§£ -->
            <section id="template-concept" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ“‹ 1. ç´¢å¼•æ¨¡æ¿æ¦‚å¿µ</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.1 ä»€ä¹ˆæ˜¯ç´¢å¼•æ¨¡æ¿</h3>
                <p class="mb-4">ç´¢å¼•æ¨¡æ¿æ˜¯Elasticsearchä¸­ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå…è®¸æ‚¨é¢„å®šä¹‰è®¾ç½®ã€æ˜ å°„å’Œåˆ«åï¼Œè¿™äº›é…ç½®ä¼šè‡ªåŠ¨åº”ç”¨åˆ°æ–°åˆ›å»ºçš„ã€ä¸æ¨¡æ¿æ¨¡å¼åŒ¹é…çš„ç´¢å¼•ä¸Šã€‚ç´¢å¼•æ¨¡æ¿ç‰¹åˆ«é€‚ç”¨äºæ—¶é—´åºåˆ—æ•°æ®ã€æ—¥å¿—æ•°æ®ç­‰éœ€è¦é¢‘ç¹åˆ›å»ºæ–°ç´¢å¼•çš„åœºæ™¯ã€‚</p>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.2 ç´¢å¼•æ¨¡æ¿çš„ä½œç”¨ä¸ä¼˜åŠ¿</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>è‡ªåŠ¨åŒ–é…ç½®</strong>ï¼šæ— éœ€ä¸ºæ¯ä¸ªæ–°ç´¢å¼•æ‰‹åŠ¨æŒ‡å®šç›¸åŒçš„é…ç½®</li>
                    <li><strong>æ ‡å‡†åŒ–</strong>ï¼šç¡®ä¿æ‰€æœ‰ç´¢å¼•ä½¿ç”¨ä¸€è‡´çš„è®¾ç½®å’Œæ˜ å°„</li>
                    <li><strong>å‡å°‘é”™è¯¯</strong>ï¼šé¿å…æ‰‹åŠ¨åˆ›å»ºç´¢å¼•æ—¶çš„é…ç½®é”™è¯¯</li>
                    <li><strong>æé«˜æ•ˆç‡</strong>ï¼šç®€åŒ–ç®¡ç†æµç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡éƒ¨ç½²ä¸­</li>
                    <li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šä¾¿äºç´¢å¼•ç»“æ„çš„æ¼”è¿›å’Œä¿®æ”¹</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">1.3 æ¨¡æ¿ä¸ç´¢å¼•çš„å…³ç³»</h3>
                <div class="mermaid my-6">
                    graph LR
                    A[ç´¢å¼•æ¨¡æ¿] -->|åŒ¹é…å¹¶åº”ç”¨åˆ°| B[æ–°åˆ›å»ºçš„ç´¢å¼•]
                    C[ç´¢å¼•æ¨¡å¼pattern] -->|å®šä¹‰åŒ¹é…è§„åˆ™| A
                    D[ä¼˜å…ˆçº§priority] -->|å†³å®šåº”ç”¨é¡ºåº| A
                    E[ç»„ä»¶æ¨¡æ¿] -->|å¯è¢«ç»„åˆåˆ°| A
                </div>
              
                <p class="mb-4">ç´¢å¼•æ¨¡æ¿é€šè¿‡æ¨¡å¼(pattern)åŒ¹é…ç´¢å¼•åç§°ã€‚å½“åˆ›å»ºæ–°ç´¢å¼•æ—¶ï¼š</p>
                <ol class="list-decimal pl-6 mb-4">
                    <li>Elasticsearchæ£€æŸ¥ç´¢å¼•åç§°æ˜¯å¦åŒ¹é…ä»»ä½•æ¨¡æ¿</li>
                    <li>å¦‚æœåŒ¹é…å¤šä¸ªæ¨¡æ¿ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åºåº”ç”¨ï¼ˆé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§ï¼‰</li>
                    <li>æ˜¾å¼æŒ‡å®šçš„ç´¢å¼•è®¾ç½®ä¼šè¦†ç›–æ¨¡æ¿ä¸­çš„è®¾ç½®</li>
                </ol>
            </section>
          
            <section id="template-types" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ”€ 2. ç´¢å¼•æ¨¡æ¿ç±»å‹</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.1 ç»„ä»¶æ¨¡æ¿(Component Templates)</h3>
                <p class="mb-4">ç»„ä»¶æ¨¡æ¿æ˜¯Elasticsearch 7.8å¼•å…¥çš„æ–°åŠŸèƒ½ï¼Œå®ƒä»¬æ˜¯å¯é‡ç”¨çš„æ„å»ºå—ï¼Œå¯ä»¥ç»„åˆåˆ°ç´¢å¼•æ¨¡æ¿ä¸­ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>åŒ…å«éƒ¨åˆ†ç´¢å¼•é…ç½®ï¼ˆsettingsã€mappingsæˆ–aliasesï¼‰</li>
                    <li>ä¸ç›´æ¥åº”ç”¨äºç´¢å¼•ï¼Œè€Œæ˜¯è¢«ç´¢å¼•æ¨¡æ¿å¼•ç”¨</li>
                    <li>ä¿ƒè¿›æ¨¡å—åŒ–è®¾è®¡å’Œé…ç½®é‡ç”¨</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.2 ç´¢å¼•æ¨¡æ¿(Index Templates)</h3>
                <p class="mb-4">ç´¢å¼•æ¨¡æ¿æ˜¯åº”ç”¨äºæ–°åˆ›å»ºç´¢å¼•çš„å®Œæ•´é…ç½®æ¨¡æ¿ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>åŒ…å«ç´¢å¼•æ¨¡å¼ã€ä¼˜å…ˆçº§</li>
                    <li>å¯ä»¥åŒ…å«è®¾ç½®ã€æ˜ å°„å’Œåˆ«åé…ç½®</li>
                    <li>å¯ä»¥å¼•ç”¨ç»„ä»¶æ¨¡æ¿</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">2.3 æ—§ç‰ˆæ¨¡æ¿vsæ–°ç‰ˆæ¨¡æ¿</h3>
                <p class="mb-4">Elasticsearchåœ¨7.8ç‰ˆæœ¬å¼•å…¥äº†æ–°çš„ç´¢å¼•æ¨¡æ¿APIï¼š</p>
                <table class="w-full border-collapse border border-gray-300 mb-6">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 p-2">ç‰¹æ€§</th>
                            <th class="border border-gray-300 p-2">æ—§ç‰ˆæ¨¡æ¿</th>
                            <th class="border border-gray-300 p-2">æ–°ç‰ˆæ¨¡æ¿</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border border-gray-300 p-2">APIç«¯ç‚¹</td>
                            <td class="border border-gray-300 p-2"><code>_template</code></td>
                            <td class="border border-gray-300 p-2"><code>_index_template</code> å’Œ <code>_component_template</code></td>
                        </tr>
                        <tr>
                            <td class="border border-gray-300 p-2">ç»„ä»¶åŒ–</td>
                            <td class="border border-gray-300 p-2">ä¸æ”¯æŒ</td>
                            <td class="border border-gray-300 p-2">æ”¯æŒç»„ä»¶æ¨¡æ¿</td>
                        </tr>
                        <tr>
                            <td class="border border-gray-300 p-2">ä¼˜å…ˆçº§æ§åˆ¶</td>
                            <td class="border border-gray-300 p-2">ä½¿ç”¨<code>order</code>å­—æ®µ</td>
                            <td class="border border-gray-300 p-2">ä½¿ç”¨<code>priority</code>å­—æ®µ</td>
                        </tr>
                        <tr>
                            <td class="border border-gray-300 p-2">æ¨¡æ¿åŒ¹é…</td>
                            <td class="border border-gray-300 p-2">ä½¿ç”¨é€šé…ç¬¦åŒ¹é…</td>
                            <td class="border border-gray-300 p-2">æ”¯æŒæ›´å¤æ‚çš„ç´¢å¼•æ¨¡å¼</td>
                        </tr>
                    </tbody>
                </table>
              
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r">
                    <p class="text-blue-800"><strong>ç‰ˆæœ¬æç¤º</strong>ï¼šæ—§ç‰ˆæ¨¡æ¿å·²è¢«å¼ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨æ–°ç‰ˆç´¢å¼•æ¨¡æ¿APIè¿›è¡Œå¼€å‘ã€‚æ—§ç‰ˆå’Œæ–°ç‰ˆæ¨¡æ¿å¯ä»¥å…±å­˜ï¼Œä½†æ–°ç‰ˆå…·æœ‰æ›´é«˜ä¼˜å…ˆçº§ã€‚</p>
                </div>
            </section>
          
            <section id="component-templates" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ§© 3. ç»„ä»¶æ¨¡æ¿è¯¦è§£</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.1 ç»„ä»¶æ¨¡æ¿ç»“æ„</h3>
                <p class="mb-4">ç»„ä»¶æ¨¡æ¿ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>name</strong>ï¼šç»„ä»¶æ¨¡æ¿çš„å”¯ä¸€æ ‡è¯†ç¬¦</li>
                    <li><strong>template</strong>ï¼šåŒ…å«settingsã€mappingså’Œaliases</li>
                    <li><strong>_meta</strong>ï¼šå¯é€‰çš„å…ƒæ•°æ®ï¼Œç”¨äºæè¿°æ¨¡æ¿</li>
                    <li><strong>version</strong>ï¼šå¯é€‰çš„ç‰ˆæœ¬å·ï¼Œç”¨äºæ¨¡æ¿ç‰ˆæœ¬æ§åˆ¶</li>
                </ul>
              
                <pre><code>PUT _component_template/logging_settings
{
  "template": {
    "settings": {
      "number_of_shards": 2,
      "number_of_replicas": 1,
      "index.refresh_interval": "5s"
    }
  },
  "_meta": {
    "description": "åŸºç¡€æ—¥å¿—ç´¢å¼•è®¾ç½®",
    "created_by": "admin"
  },
  "version": 1
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.2 åˆ›å»ºå’Œç®¡ç†ç»„ä»¶æ¨¡æ¿</h3>
                <p class="mb-4">ç»„ä»¶æ¨¡æ¿å¯ä»¥é€šè¿‡ä»¥ä¸‹APIç®¡ç†ï¼š</p>
              
                <pre><code># åˆ›å»º/æ›´æ–°ç»„ä»¶æ¨¡æ¿
PUT _component_template/mappings_template
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": { "type": "date" },
        "message": { "type": "text" },
        "level": { "type": "keyword" }
      }
    }
  }
}

# è·å–ç»„ä»¶æ¨¡æ¿
GET _component_template/mappings_template

# è·å–æ‰€æœ‰ç»„ä»¶æ¨¡æ¿
GET _component_template

# åˆ é™¤ç»„ä»¶æ¨¡æ¿
DELETE _component_template/mappings_template</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">3.3 ç»„ä»¶æ¨¡æ¿æœ€ä½³å®è·µ</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>æŒ‰åŠŸèƒ½åˆ’åˆ†ç»„ä»¶æ¨¡æ¿ï¼ˆè®¾ç½®ã€æ˜ å°„ã€åˆ«åç­‰ï¼‰</li>
                    <li>ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½åçº¦å®š</li>
                    <li>åŒ…å«ç‰ˆæœ¬ä¿¡æ¯å’Œå…ƒæ•°æ®</li>
                    <li>éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªç»„ä»¶å…³æ³¨ä¸€ä¸ªæ–¹é¢</li>
                </ul>
              
                <p class="mb-4">ç»„ä»¶æ¨¡æ¿ç¤ºä¾‹ï¼š</p>
              
                <pre><code># è®¾ç½®ç»„ä»¶
PUT _component_template/base_settings
{
  "template": {
    "settings": {
      "codec": "best_compression",
      "index.lifecycle.name": "data_retention_policy"
    }
  },
  "version": 1
}

# æ˜ å°„ç»„ä»¶
PUT _component_template/base_mappings
{
  "template": {
    "mappings": {
      "dynamic_templates": [
        {
          "strings_as_keywords": {
            "match_mapping_type": "string",
            "mapping": {
              "type": "keyword"
            }
          }
        }
      ]
    }
  },
  "version": 2
}</code></pre>
            </section>
          
            <section id="index-templates" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ“ 4. ç´¢å¼•æ¨¡æ¿é…ç½®</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.1 ç´¢å¼•æ¨¡æ¿ç»“æ„</h3>
                <p class="mb-4">ç´¢å¼•æ¨¡æ¿åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>name</strong>ï¼šæ¨¡æ¿çš„å”¯ä¸€æ ‡è¯†ç¬¦</li>
                    <li><strong>index_patterns</strong>ï¼šç”¨äºåŒ¹é…ç´¢å¼•åç§°çš„æ¨¡å¼</li>
                    <li><strong>priority</strong>ï¼šå†³å®šæ¨¡æ¿åº”ç”¨é¡ºåºçš„ä¼˜å…ˆçº§</li>
                    <li><strong>template</strong>ï¼šåŒ…å«settingsã€mappingså’Œaliases</li>
                    <li><strong>composed_of</strong>ï¼šå¼•ç”¨çš„ç»„ä»¶æ¨¡æ¿åˆ—è¡¨</li>
                    <li><strong>_meta</strong>ï¼šå¯é€‰å…ƒæ•°æ®ä¿¡æ¯</li>
                    <li><strong>version</strong>ï¼šå¯é€‰ç‰ˆæœ¬å·</li>
                </ul>
              
                <pre><code>PUT _index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "priority": 100,
  "composed_of": ["logging_settings", "mappings_template"],
  "template": {
    "settings": {
      "index.lifecycle.rollover_alias": "logs"
    },
    "mappings": {
      "dynamic": false,
      "properties": {
        "host": { "type": "keyword" }
      }
    },
    "aliases": {
      "all_logs": {}
    }
  },
  "_meta": {
    "description": "æ—¥å¿—ç´¢å¼•æ¨¡æ¿",
    "created": "2023-10-15"
  },
  "version": 1
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.2 ç´¢å¼•æ¨¡æ¿APIæ“ä½œ</h3>
                <pre><code># åˆ›å»º/æ›´æ–°ç´¢å¼•æ¨¡æ¿
PUT _index_template/metrics_template
{
  "index_patterns": ["metrics-*"],
  "priority": 200,
  "template": {
    "settings": {
      "number_of_shards": 1,
      "number_of_replicas": 1
    },
    "mappings": {
      "properties": {
        "value": { "type": "double" },
        "timestamp": { "type": "date" }
      }
    }
  }
}

# è·å–ç´¢å¼•æ¨¡æ¿
GET _index_template/metrics_template

# è·å–æ‰€æœ‰ç´¢å¼•æ¨¡æ¿
GET _index_template

# æŸ¥çœ‹ç´¢å¼•æ¨¡æ¿æ˜¯å¦å­˜åœ¨
HEAD _index_template/metrics_template

# åˆ é™¤ç´¢å¼•æ¨¡æ¿
DELETE _index_template/metrics_template</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">4.3 æ¨¡æ¿åˆå¹¶é€»è¾‘</h3>
                <p class="mb-4">å½“å¤šä¸ªç»„ä»¶ä¸æ¨¡æ¿è‡ªèº«é…ç½®åˆå¹¶æ—¶ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
                <ol class="list-decimal pl-6 mb-4">
                    <li>ç»„ä»¶æ¨¡æ¿æŒ‰ç…§å®ƒä»¬åœ¨<code>composed_of</code>åˆ—è¡¨ä¸­çš„é¡ºåºåº”ç”¨</li>
                    <li>ååº”ç”¨çš„ç»„ä»¶ä¼šè¦†ç›–å…ˆåº”ç”¨ç»„ä»¶çš„å†²çªè®¾ç½®</li>
                    <li>ç´¢å¼•æ¨¡æ¿è‡ªèº«çš„<code>template</code>é…ç½®æœ€ååº”ç”¨ï¼Œæ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§</li>
                    <li>å¦‚æœæœ‰åµŒå¥—å±æ€§å†²çªï¼Œåˆ™æ•´ä¸ªå¯¹è±¡ä¼šè¢«æ›¿æ¢ï¼Œè€Œä¸æ˜¯åˆå¹¶</li>
                </ol>
            </section>
          
            <section id="template-priority" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ“Š 5. æ¨¡æ¿ä¼˜å…ˆçº§ä¸åŒ¹é…</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.1 ç´¢å¼•æ¨¡å¼è¯­æ³•</h3>
                <p class="mb-4">ç´¢å¼•æ¨¡å¼ä½¿ç”¨é€šé…ç¬¦æ¥åŒ¹é…ç´¢å¼•åç§°ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><code>*</code>ï¼šåŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</li>
                    <li><code>?</code>ï¼šåŒ¹é…å•ä¸ªå­—ç¬¦</li>
                </ul>
              
                <pre><code># åŒ¹é…æ‰€æœ‰ä»¥logs-å¼€å¤´çš„ç´¢å¼•
"index_patterns": ["logs-*"]

# åŒ¹é…ç‰¹å®šå¹´ä»½çš„æ—¥å¿—
"index_patterns": ["logs-2023-*"]

# åŒ¹é…å¤šç§æ¨¡å¼
"index_patterns": ["logs-*", "metrics-*"]</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.2 æ¨¡æ¿ä¼˜å…ˆçº§æœºåˆ¶</h3>
                <p class="mb-4">å½“å¤šä¸ªæ¨¡æ¿åŒ¹é…åŒä¸€ä¸ªç´¢å¼•æ—¶ï¼Œä¼˜å…ˆçº§(priority)å†³å®šå®ƒä»¬çš„åº”ç”¨é¡ºåºï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>é«˜ä¼˜å…ˆçº§æ¨¡æ¿è¦†ç›–ä½ä¼˜å…ˆçº§æ¨¡æ¿çš„å†²çªè®¾ç½®</li>
                    <li>ç›¸åŒä¼˜å…ˆçº§æ¨¡æ¿æŒ‰åç§°å­—æ¯é¡ºåºåº”ç”¨</li>
                    <li>å†…ç½®æ¨¡æ¿é€šå¸¸å…·æœ‰è´Ÿä¼˜å…ˆçº§</li>
                </ul>
              
                <pre><code># é«˜ä¼˜å…ˆçº§é€šç”¨æ¨¡æ¿
PUT _index_template/base_template
{
  "index_patterns": ["*"],
  "priority": 0,
  "template": {
    "settings": {
      "number_of_shards": 1
    }
  }
}

# ç‰¹å®šç±»å‹çš„æ›´é«˜ä¼˜å…ˆçº§æ¨¡æ¿
PUT _index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "priority": 100,
  "template": {
    "settings": {
      "number_of_shards": 2
    }
  }
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.3 æ¨¡æ¿åŒ¹é…ä¸åº”ç”¨æµç¨‹</h3>
                <div class="mermaid my-6">
                    graph TD
                    A[åˆ›å»ºæ–°ç´¢å¼•] --> B[æŸ¥æ‰¾åŒ¹é…çš„ç´¢å¼•æ¨¡æ¿]
                    B --> C{åŒ¹é…å¤šä¸ªæ¨¡æ¿?}
                    C -- æ˜¯ --> D[æŒ‰ä¼˜å…ˆçº§æ’åº]
                    C -- å¦ --> E[åº”ç”¨å•ä¸ªæ¨¡æ¿]
                    D --> F[é€ä¸ªåº”ç”¨æ¨¡æ¿]
                    F --> G[åˆå¹¶æ‰€æœ‰æ¨¡æ¿é…ç½®]
                    E --> G
                    G --> H[åº”ç”¨æ˜¾å¼æŒ‡å®šçš„è®¾ç½®]
                    H --> I[åˆ›å»ºæœ€ç»ˆç´¢å¼•é…ç½®]
                </div>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">5.4 éªŒè¯æ¨¡æ¿åŒ¹é…ç»“æœ</h3>
                <p class="mb-4">ä½¿ç”¨æ¨¡æ‹ŸAPIæµ‹è¯•æ¨¡æ¿åŒ¹é…å’Œåˆå¹¶ç»“æœï¼š</p>
              
                <pre><code># æ¨¡æ‹Ÿåˆ›å»ºç´¢å¼•ä»¥æµ‹è¯•æ¨¡æ¿åº”ç”¨
POST _index_template/_simulate_index/logs-2023-10-15
              
# æ¨¡æ‹ŸåŒ…å«æ˜ç¡®è®¾ç½®çš„ç´¢å¼•åˆ›å»º
POST _index_template/_simulate
{
  "index_name": "logs-2023-10-15",
  "template": {
    "settings": {
      "number_of_replicas": 2
    }
  }
}</code></pre>
            </section>
          
            <section id="template-examples" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ’¡ 6. å®æˆ˜æ¡ˆä¾‹</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.1 æ—¥å¿—æ•°æ®æ¨¡æ¿è®¾è®¡</h3>
                <p class="mb-4">é€‚ç”¨äºåº”ç”¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ç­‰åœºæ™¯ï¼š</p>
              
                <pre><code># æ—¥å¿—è®¾ç½®ç»„ä»¶
PUT _component_template/logs_settings
{
  "template": {
    "settings": {
      "number_of_shards": 3,
      "number_of_replicas": 1,
      "index.lifecycle.name": "logs_policy",
      "index.lifecycle.rollover_alias": "logs"
    }
  }
}

# æ—¥å¿—æ˜ å°„ç»„ä»¶
PUT _component_template/logs_mappings
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": { "type": "date" },
        "message": { "type": "text", "fields": { "keyword": { "type": "keyword", "ignore_above": 256 } } },
        "level": { "type": "keyword" },
        "logger_name": { "type": "keyword" },
        "thread_name": { "type": "keyword" },
        "host": { "type": "keyword" },
        "service": { "type": "keyword" },
        "trace": {
          "properties": {
            "id": { "type": "keyword" },
            "span_id": { "type": "keyword" }
          }
        }
      }
    }
  }
}

# æ—¥å¿—ç´¢å¼•æ¨¡æ¿
PUT _index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "composed_of": ["logs_settings", "logs_mappings"],
  "priority": 100,
  "template": {
    "aliases": {
      "all_logs": {}
    }
  },
  "_meta": {
    "description": "ç”¨äºåº”ç”¨æ—¥å¿—çš„æ¨¡æ¿"
  },
  "version": 1
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.2 æ—¶åºæ•°æ®æ¨¡æ¿è®¾è®¡</h3>
                <p class="mb-4">é€‚ç”¨äºæŒ‡æ ‡ã€ç›‘æ§ã€IoTæ•°æ®ç­‰åœºæ™¯ï¼š</p>
              
                <pre><code># æ—¶åºæ•°æ®ç´¢å¼•æ¨¡æ¿
PUT _index_template/metrics_template
{
  "index_patterns": ["metrics-*"],
  "priority": 200,
  "template": {
    "settings": {
      "number_of_shards": 1,
      "number_of_replicas": 1,
      "index.mapping.coerce": false,
      "index.refresh_interval": "5s"
    },
    "mappings": {
      "dynamic": false,
      "properties": {
        "@timestamp": { "type": "date" },
        "host": { "type": "keyword" },
        "service": { "type": "keyword" },
        "metric_name": { "type": "keyword" },
        "metric_type": { "type": "keyword" },
        "value": { "type": "double" },
        "dimensions": {
          "type": "object",
          "dynamic": true
        }
      }
    },
    "aliases": {
      "all_metrics": {}
    }
  },
  "_meta": {
    "description": "ç”¨äºæ—¶åºæŒ‡æ ‡æ•°æ®çš„æ¨¡æ¿"
  },
  "version": 1
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">6.3 æ–‡æ¡£æ•°æ®æ¨¡æ¿è®¾è®¡</h3>
                <p class="mb-4">é€‚ç”¨äºæœç´¢å¼•æ“ã€å†…å®¹ç®¡ç†ç³»ç»Ÿç­‰åœºæ™¯ï¼š</p>
              
                <pre><code># æ–‡æ¡£åˆ†æå™¨ç»„ä»¶
PUT _component_template/text_analyzers
{
  "template": {
    "settings": {
      "analysis": {
        "analyzer": {
          "html_strip_analyzer": {
            "type": "custom",
            "tokenizer": "standard",
            "filter": ["lowercase", "stop"],
            "char_filter": ["html_strip"]
          }
        }
      }
    }
  }
}

# æ–‡æ¡£ç´¢å¼•æ¨¡æ¿
PUT _index_template/documents_template
{
  "index_patterns": ["docs-*"],
  "priority": 300,
  "composed_of": ["text_analyzers"],
  "template": {
    "settings": {
      "number_of_shards": 2,
      "number_of_replicas": 1
    },
    "mappings": {
      "properties": {
        "title": { 
          "type": "text",
          "fields": { "keyword": { "type": "keyword", "ignore_above": 256 } }
        },
        "content": { 
          "type": "text", 
          "analyzer": "html_strip_analyzer" 
        },
        "summary": { "type": "text" },
        "author": { "type": "keyword" },
        "tags": { "type": "keyword" },
        "published_date": { "type": "date" },
        "updated_date": { "type": "date" }
      }
    }
  },
  "_meta": {
    "description": "ç”¨äºæ–‡æ¡£å†…å®¹çš„æ¨¡æ¿"
  },
  "version": 1
}</code></pre>
            </section>
          
            <section id="template-best-practices" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ† 7. æ¨¡æ¿ç®¡ç†æœ€ä½³å®è·µ</h2>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">7.1 æ¨¡æ¿è®¾è®¡åŸåˆ™</h3>
                <ul class="list-disc pl-6 mb-6">
                    <li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šä½¿ç”¨ç»„ä»¶æ¨¡æ¿åˆ†ç¦»å…³æ³¨ç‚¹</li>
                    <li><strong>å±‚æ¬¡åŒ–ç»„ç»‡</strong>ï¼šä»é€šç”¨åˆ°ç‰¹å®šï¼Œä½¿ç”¨ä¼˜å…ˆçº§æ§åˆ¶</li>
                    <li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šä¸ºæ‰€æœ‰æ¨¡æ¿æ·»åŠ ç‰ˆæœ¬å·</li>
                    <li><strong>æ–‡æ¡£åŒ–</strong>ï¼šä½¿ç”¨<code>_meta</code>å­—æ®µæ·»åŠ æè¿°ä¿¡æ¯</li>
                    <li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šä½¿ç”¨æ¨¡æ‹ŸAPIéªŒè¯æ¨¡æ¿</li>
                </ul>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">7.2 æ¨¡æ¿ç‰ˆæœ¬æ§åˆ¶</h3>
                <p class="mb-4">ç‰ˆæœ¬æ§åˆ¶æ˜¯ç®¡ç†æ¨¡æ¿æ¼”è¿›çš„å…³é”®ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>å§‹ç»ˆåŒ…å«<code>version</code>å­—æ®µ</li>
                    <li>ä½¿ç”¨å‘½åçº¦å®šåŒºåˆ†å¤§ç‰ˆæœ¬å˜æ›´ï¼Œå¦‚<code>logs_v2_template</code></li>
                    <li>åœ¨<code>_meta</code>ä¸­è®°å½•å˜æ›´å†å²</li>
                    <li>ä½¿ç”¨ä»£ç åº“ï¼ˆå¦‚Gitï¼‰ç®¡ç†æ¨¡æ¿JSONæ–‡ä»¶</li>
                </ul>
              
                <pre><code>PUT _index_template/logs_v2_template
{
  "index_patterns": ["logs-v2-*"],
  "priority": 200,
  "template": {
    "settings": { ... },
    "mappings": { ... }
  },
  "_meta": {
    "description": "ç”¨äºåº”ç”¨æ—¥å¿—çš„V2æ¨¡æ¿",
    "created_by": "admin",
    "created_at": "2023-10-15",
    "version_history": [
      {"version": 1, "date": "2023-09-01", "changes": "åˆå§‹ç‰ˆæœ¬"},
      {"version": 2, "date": "2023-10-15", "changes": "æ·»åŠ traceå­—æ®µ"}
    ]
  },
  "version": 2
}</code></pre>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">7.3 æ¨¡æ¿è¿ç§»ç­–ç•¥</h3>
                <p class="mb-4">å½“éœ€è¦å¯¹ç°æœ‰æ¨¡æ¿è¿›è¡Œä¸å…¼å®¹æ›´æ”¹æ—¶ï¼Œåº”é‡‡ç”¨ä»¥ä¸‹è¿ç§»ç­–ç•¥ï¼š</p>
                <ol class="list-decimal pl-6 mb-4">
                    <li>åˆ›å»ºæ–°ç‰ˆæœ¬æ¨¡æ¿ï¼Œä½¿ç”¨ä¸åŒçš„ç´¢å¼•æ¨¡å¼</li>
                    <li>åˆ›å»ºæ–°çš„åˆ«åï¼ŒæŒ‡å‘æ–°ç´¢å¼•</li>
                    <li>é‡å»ºæ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰æˆ–ä»…å¯¹æ–°æ•°æ®åº”ç”¨æ–°æ¨¡æ¿</li>
                    <li>é€æ­¥è¿ç§»åº”ç”¨åˆ°æ–°åˆ«å</li>
                    <li>ç­‰å¾…æ—§ç´¢å¼•è¿‡æœŸæˆ–æ‰‹åŠ¨åˆ é™¤</li>
                </ol>
              
                <div class="mermaid my-6">
                    graph LR
                    A[åˆ›å»ºæ–°ç‰ˆæ¨¡æ¿] --> B[åˆ›å»ºæ–°æ•°æ®æµ]
                    B --> C[åº”ç”¨ç¨‹åºè¿ç§»]
                    C --> D[æ—§æ•°æ®å¤„ç†]
                    D --> E[åˆ é™¤æ—§æ¨¡æ¿]
                </div>
              
                <h3 class="text-xl font-semibold mb-3 text-gray-700">7.4 æ¨¡æ¿æµ‹è¯•æ–¹æ³•</h3>
                <p class="mb-4">ç¡®ä¿æ¨¡æ¿æŒ‰é¢„æœŸå·¥ä½œçš„æµ‹è¯•ç­–ç•¥ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>ä½¿ç”¨æ¨¡æ‹ŸAPIéªŒè¯æ¨¡æ¿åŒ¹é…å’Œåˆå¹¶ç»“æœ</li>
                    <li>åœ¨æµ‹è¯•ç¯å¢ƒä¸­éƒ¨ç½²æ¨¡æ¿å¹¶åˆ›å»ºæµ‹è¯•ç´¢å¼•</li>
                    <li>éªŒè¯ç”Ÿæˆçš„ç´¢å¼•è®¾ç½®å’Œæ˜ å°„</li>
                    <li>æµ‹è¯•æ•°æ®ç´¢å¼•å’ŒæŸ¥è¯¢è¡Œä¸º</li>
                    <li>ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬éªŒè¯æ¨¡æ¿æ›´æ”¹</li>
                </ul>
              
                <pre><code># æ¨¡æ‹Ÿç´¢å¼•åˆ›å»º
POST _index_template/_simulate/logs-2023-10-15

# éªŒè¯ç‰¹å®šæ¨¡æ¿åŒ¹é…
POST _index_template/_simulate_index/logs-2023-10-15

# åˆ›å»ºæµ‹è¯•ç´¢å¼•
PUT logs-test-001
{
  "aliases": {
    "logs-test": {}
  }
}

# éªŒè¯ç´¢å¼•è®¾ç½®
GET logs-test-001/_settings

# éªŒè¯ç´¢å¼•æ˜ å°„
GET logs-test-001/_mapping</code></pre>
              
                <div class="bg-green-50 border-l-4 border-green-500 p-4 my-6 rounded-r">
                    <p class="text-green-800"><strong>æœ€ä½³å®è·µ</strong>ï¼šå°†æ¨¡æ¿å®šä¹‰å­˜å‚¨åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨CI/CDæµç¨‹è‡ªåŠ¨éƒ¨ç½²å’Œæµ‹è¯•æ¨¡æ¿å˜æ›´ã€‚è¿™ç¡®ä¿äº†æ¨¡æ¿å˜æ›´çš„å¯è¿½è¸ªæ€§å’Œå¯é æ€§ã€‚</p>
                </div>
            </section>
          
            <section id="conclusion" class="mb-12">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200 text-gray-800">ğŸ¯ æ€»ç»“</h2>
                <p class="mb-4">ç´¢å¼•ç®¡ç†å’Œç´¢å¼•æ¨¡æ¿æ˜¯Elasticsearché›†ç¾¤ç®¡ç†ä¸­çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡æ·±å…¥ç†è§£ç´¢å¼•çš„ç”Ÿå‘½å‘¨æœŸã€è®¾ç½®å’Œä¼˜åŒ–ç­–ç•¥ï¼Œä»¥åŠæŒæ¡ç´¢å¼•æ¨¡æ¿çš„åˆ›å»ºå’Œç®¡ç†ï¼Œæ‚¨å¯ä»¥æ„å»ºæ›´åŠ é«˜æ•ˆã€ä¸€è‡´ä¸”æ˜“äºç»´æŠ¤çš„Elasticsearchéƒ¨ç½²ã€‚</p>
              
                <p class="mb-4">ç´¢å¼•æ¨¡æ¿ä¸ºå¤§è§„æ¨¡Elasticsearchéƒ¨ç½²æä¾›äº†å…³é”®çš„è‡ªåŠ¨åŒ–å’Œæ ‡å‡†åŒ–æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯ï¼š</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>é€šè¿‡ç»„ä»¶æ¨¡æ¿å®ç°é…ç½®é‡ç”¨</li>
                    <li>é€šè¿‡ç´¢å¼•æ¨¡æ¿è‡ªåŠ¨åŒ–ç´¢å¼•åˆ›å»º</li>
                    <li>é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å’Œæµ‹è¯•ç¡®ä¿å¯é çš„æ¨¡æ¿æ›´æ–°</li>
                </ul>
              
                <p class="mb-4">åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”å½“ç»“åˆä¸šåŠ¡éœ€æ±‚ï¼Œéµå¾ªæœ€ä½³å®è·µï¼Œå®šæœŸå®¡æŸ¥å’Œä¼˜åŒ–ç´¢å¼•å’Œæ¨¡æ¿é…ç½®ï¼Œä»¥ä¿æŒElasticsearché›†ç¾¤çš„é«˜æ€§èƒ½å’Œå¯é æ€§ã€‚</p>
              
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm mt-6">
                    <h3 class="text-lg font-semibold mb-3">è¿›ä¸€æ­¥å­¦ä¹ èµ„æº</h3>
                    <ul class="list-disc pl-6">
                        <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" class="text-blue-600 hover:underline">Elasticsearchå®˜æ–¹æ–‡æ¡£</a></li>
                        <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-templates.html" class="text-blue-600 hover:underline">ç´¢å¼•æ¨¡æ¿å®˜æ–¹æ–‡æ¡£</a></li>
                        <li><a href="https://www.elastic.co/blog/composable-index-templates-in-elasticsearch-7-8-0" class="text-blue-600 hover:underline">Elasticsearch 7.8.0ä¸­çš„å¯ç»„åˆç´¢å¼•æ¨¡æ¿</a></li>
                    </ul>
                </div>
            </section>
        </main>
    </div>
  
    <script>
        // Initialize mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            flowchart: { curve: 'basis' }
        });
      
        // Highlight active section in TOC
        document.addEventListener('DOMContentLoaded', function() {
            const sections = document.querySelectorAll('section[id]');
            const tocLinks = document.querySelectorAll('.toc-link');
          
            function highlightTOC() {
                let scrollY = window.pageYOffset;
              
                sections.forEach(section => {
                    const sectionHeight = section.offsetHeight;
                    const sectionTop = section.offsetTop - 100;
                    const sectionId = section.getAttribute('id');
                  
                    if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                        tocLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === '#' + sectionId) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }
          
            window.addEventListener('scroll', highlightTOC);
            highlightTOC(); // Call once on load
        });
    </script>
</body>
</html>