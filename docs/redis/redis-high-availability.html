<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Redisé«˜å¯ç”¨ä¸é›†ç¾¤æŠ€æœ¯è¯¦è§£</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Inter:wght@400;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸ”„%3C/text%3E%3C/svg%3E">
    <style>
        :root {
            --primary-color: #dc2626;
            --secondary-color: #f87171;
            --bg-color: #fef2f2;
            --code-bg: #f3f4f6;
            --border-color: #fecaca;
        }
        body {
            font-family: 'Noto Sans SC', 'Inter', sans-serif;
            line-height: 1.6;
            color: #374151;
            background-color: #ffffff;
        }
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
        }
        code, pre {
            font-family: 'Fira Code', monospace;
            background-color: var(--code-bg);
            border-radius: 0.25rem;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .term {
            color: var(--primary-color);
            cursor: pointer;
            border-bottom: 1px dashed var(--secondary-color);
            position: relative;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            max-width: 90vw;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .code-block {
            position: relative;
            background-color: var(--code-bg);
            border-radius: 0.5rem;
            margin: 1rem 0;
            overflow: hidden;
        }
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: #e5e7eb;
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
            font-size: 0.875rem;
        }
        .code-content {
            padding: 1rem;
            overflow-x: auto;
            max-height: 400px;
        }
        .copy-btn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            color: #4b5563;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.2s;
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        .copy-btn:hover {
            color: #1f2937;
            background-color: rgba(229, 231, 235, 0.5);
        }
        .copy-btn.copied {
            background-color: #10b981;
            color: white;
        }
        .copy-btn.copied:after {
            content: "âœ“";
            margin-left: 4px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
            word-wrap: break-word;
        }
        .comparison-table th {
            background-color: #f9fafb;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f9fafb;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .progress-indicator {
            position: sticky;
            top: 0;
            width: 100%;
            height: 4px;
            background-color: #e5e7eb;
            z-index: 100;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }
        .mermaid {
            margin: 1.5rem 0;
            text-align: center;
            overflow-x: auto;
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 0.5rem;
            max-width: 100%;
            min-height: 200px;
        }
        #summary-diagram {
            background-color: #ffffff !important;
            margin: 0 auto;
            min-height: 400px;
            font-family: 'Noto Sans SC', 'Inter', sans-serif !important;
            padding: 1rem 0;
        }
        /* ç¡®ä¿æ€ç»´å¯¼å›¾å†…å®¹ä¸æ˜¾ç¤ºä¸ºä»£ç å— */
        #summary-diagram pre, #summary-diagram code {
            background-color: transparent !important;
            border: none !important;
            padding: 0 !important;
            overflow: visible !important;
            font-family: inherit !important;
            font-size: inherit !important;
        }
        /* æ”¹è¿›æ€ç»´å¯¼å›¾èŠ‚ç‚¹æ ·å¼ */
        .mindmap-node rect {
            fill: #f9fafb !important;
            stroke: #e5e7eb !important;
            rx: 5px !important;
            ry: 5px !important;
        }
        .mindmap-node.root circle {
            fill: #dc2626 !important;
            stroke: #b91c1c !important;
        }
        .mindmap-node.root text {
            fill: white !important;
            font-weight: bold !important;
        }
        @media print {
            .no-print {
                display: none;
            }
            body {
                font-size: 12pt;
            }
            .page-break {
                page-break-before: always;
            }
        }
        @media (max-width: 768px) {
            .comparison-table {
                font-size: 0.875rem;
                display: block;
                overflow-x: auto;
                white-space: nowrap;
                -webkit-overflow-scrolling: touch;
            }
            .comparison-table th, .comparison-table td {
                padding: 0.5rem;
            }
            .code-content {
                font-size: 0.875rem;
                padding: 0.75rem;
            }
            .mermaid {
                font-size: 0.875rem;
                padding: 0.5rem;
            }
            .grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .mb-12 {
                margin-bottom: 2rem !important;
            }
            .mb-8 {
                margin-bottom: 1.5rem !important;
            }
            .tooltip .tooltiptext {
                width: auto;
                left: 0;
                right: 0;
                transform: none;
                margin-left: 0;
            }
            #summary-diagram {
                min-height: 350px;
                padding: 0.5rem;
            }
        }
        @media (max-width: 640px) {
            .comparison-table {
                font-size: 0.75rem;
            }
            .code-content {
                font-size: 0.75rem;
                max-height: 300px;
            }
            h1 {
                font-size: 1.5rem;
            }
            h2 {
                font-size: 1.25rem;
            }
            h3 {
                font-size: 1.125rem;
            }
            body {
                font-size: 14px;
            }
            .p-6 {
                padding: 0.75rem !important;
            }
            code, pre {
                font-size: 0.75rem;
            }
            .term {
                margin: 0 2px;
            }
            #summary-diagram {
                min-height: 300px;
            }
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .mermaid-wrapper {
            width: 100%;
            overflow: hidden;
            background: white;
            border-radius: 0.5rem;
        }
        /* ä¿®å¤ä»£ç æ¡†ä¸­çš„å°–æ‹¬å·æ˜¾ç¤º */
        .code-content code {
            white-space: pre;
        }
    
        
        
    
        
    
        
    
        
    
        /* è¿”å›é¦–é¡µæŒ‰é’®æ ·å¼ */
        .home-button-fixed {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.2s;
        }
        .home-button-fixed:hover {
            background-color: #2980b9;
            transform: translateY(-50%) translateX(2px);
        }
        .home-button-fixed svg {
            width: 20px;
            height: 20px;
        }
        @media (max-width: 768px) {
            .home-button-fixed {
                top: 50%;
                left: 10px;
                width: 36px;
                height: 36px;
            }
            .home-button-fixed svg {
                width: 18px;
                height: 18px;
            }
        }
    </style>
</head>
<body class="bg-white text-gray-800">
    <a href="../index.html" class="home-button-fixed" title="è¿”å›é¦–é¡µ">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
    </a>
    
    
    
    
    <div class="progress-indicator no-print">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <header class="bg-gradient-to-r from-red-50 to-red-100 py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
            <div class="text-center">
                <span class="inline-block px-3 py-1 text-sm font-medium bg-red-100 text-red-800 rounded-full mb-2">ä¸­çº§</span>
                <h1 class="text-3xl font-bold text-gray-900 sm:text-4xl">Redisé«˜å¯ç”¨ä¸é›†ç¾¤æŠ€æœ¯è¯¦è§£</h1>
                <p class="mt-2 text-lg text-gray-600">ä¿éšœæ•°æ®å¯é æ€§ä¸ç³»ç»Ÿæ‰©å±•æ€§çš„æ ¸å¿ƒæŠ€æœ¯</p>
            </div>
        </div>
    </header>
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-16">
        <section id="definition" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">æœ¯è¯­å®šä¹‰</h2>
            <div class="bg-white rounded-lg shadow-sm border border-red-100 p-6">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <svg class="h-6 w-6 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-gray-900">é«˜å¯ç”¨ (High Availability)</h3>
                        <p class="mt-1 text-gray-600">æŒ‡ç³»ç»Ÿåœ¨é¢å¯¹å„ç§æ•…éšœæ—¶èƒ½å¤ŸæŒç»­æä¾›æœåŠ¡çš„èƒ½åŠ›ï¼Œé€šå¸¸é€šè¿‡å†—ä½™è®¾è®¡å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»å®ç°ã€‚åœ¨Redisä¸­ï¼Œä¸»è¦é€šè¿‡<span class="term tooltip">å“¨å…µæ¨¡å¼<span class="tooltiptext">Redis Sentinelæ˜¯Redisçš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿç›‘æ§ä¸»èŠ‚ç‚¹çŠ¶æ€å¹¶åœ¨ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ã€‚</span></span>å’Œ<span class="term tooltip">é›†ç¾¤æ¨¡å¼<span class="tooltiptext">Redis Clusteræ˜¯Redisçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œæä¾›æ•°æ®åˆ†ç‰‡ã€è‡ªåŠ¨æ•…éšœè½¬ç§»å’Œçº¿æ€§æ‰©å±•èƒ½åŠ›ã€‚</span></span>å®ç°ã€‚</p>
                    </div>
                </div>
                <div class="mt-6">
                    <h4 class="text-md font-medium text-gray-900">æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <ul class="mt-2 pl-6 list-disc text-gray-600">
                        <li><strong>æ•…éšœè½¬ç§» (Failover)</strong>ï¼šå½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨é€‰ä¸¾å¹¶æå‡ä¸€ä¸ªä»èŠ‚ç‚¹ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</li>
                        <li><strong>æ•°æ®åˆ†ç‰‡ (Sharding)</strong>ï¼šå°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œæé«˜ç³»ç»Ÿå®¹é‡å’Œæ€§èƒ½</li>
                        <li><strong>ä¸€è‡´æ€§å“ˆå¸Œ (Consistent Hashing)</strong>ï¼šä¸€ç§æ•°æ®åˆ†å¸ƒç®—æ³•ï¼Œåœ¨èŠ‚ç‚¹å˜åŒ–æ—¶æœ€å°åŒ–æ•°æ®è¿ç§»</li>
                        <li><strong>ä¸»ä»å¤åˆ¶ (Master-Slave Replication)</strong>ï¼šæ•°æ®ä»ä¸»èŠ‚ç‚¹å¤åˆ¶åˆ°ä»èŠ‚ç‚¹ï¼Œæä¾›æ•°æ®å†—ä½™</li>
                    </ul>
                </div>
            </div>
        </section>
        <section id="implementation" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">å®ç°ç»†èŠ‚ä¸ä¼˜åŒ–</h2>
            <div class="mb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-3">å“¨å…µæ¨¡å¼ (Sentinel)</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>sentinel.conf é…ç½®ç¤ºä¾‹</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <div class="code-content">
                        <pre><code># ç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œåç§°ä¸ºmymasterï¼ŒIPä¸º127.0.0.1ï¼Œç«¯å£ä¸º6379ï¼Œå½“2ä¸ªå“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹æ•…éšœæ—¶æ‰è¿›è¡Œæ•…éšœè½¬ç§»
sentinel monitor mymaster 127.0.0.1 6379 2

# å“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿æ‰€éœ€çš„æ¯«ç§’æ•°
sentinel down-after-milliseconds mymaster 5000

# æ•…éšœè½¬ç§»è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶è¿›è¡ŒåŒæ­¥çš„ä»èŠ‚ç‚¹æ•°é‡
sentinel parallel-syncs mymaster 1

# æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´
sentinel failover-timeout mymaster 180000</code></pre>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="mermaid" id="sentinel-diagram">%%{init: {'theme': 'neutral', 'themeVariables': { 'fontSize': '14px', 'fontFamily': 'Noto Sans SC, Inter, sans-serif' }}}%%
                        graph TD
                            A[å“¨å…µ1] -->|ç›‘æ§| B[ä¸»èŠ‚ç‚¹]
                            C[å“¨å…µ2] -->|ç›‘æ§| B
                            D[å“¨å…µ3] -->|ç›‘æ§| B
                            B -->|å¤åˆ¶| E[ä»èŠ‚ç‚¹1]
                            B -->|å¤åˆ¶| F[ä»èŠ‚ç‚¹2]
                            A -.->|ç›‘æ§| E
                            A -.->|ç›‘æ§| F
                            C -.->|ç›‘æ§| E
                            C -.->|ç›‘æ§| F
                            D -.->|ç›‘æ§| E
                            D -.->|ç›‘æ§| F
                            A <-->|é€šä¿¡| C
                            A <-->|é€šä¿¡| D
                            C <-->|é€šä¿¡| D
                            
                            classDef sentinel fill:#f87171,stroke:#dc2626,color:white;
                            classDef master fill:#818cf8,stroke:#4f46e5,color:white;
                            classDef slave fill:#a3e635,stroke:#65a30d,color:black;
                            
                            class A,C,D sentinel;
                            class B master;
                            class E,F slave;
                    </div>
                </div>
                <div class="mt-4 text-gray-700">
                    <p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
                    <ol class="list-decimal pl-6 mt-2">
                        <li>å“¨å…µæŒç»­ç›‘æ§ä¸»ä»èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€</li>
                        <li>å½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå“¨å…µä¼šè¿›è¡ŒæŠ•ç¥¨é€‰ä¸¾ä¸€ä¸ªå“¨å…µä½œä¸ºé¢†å¯¼è€…</li>
                        <li>é¢†å¯¼è€…å“¨å…µé€‰æ‹©ä¸€ä¸ªä»èŠ‚ç‚¹æå‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</li>
                        <li>é€šçŸ¥å…¶ä»–ä»èŠ‚ç‚¹æ›´æ–°å¤åˆ¶ç›®æ ‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</li>
                        <li>é€šçŸ¥å®¢æˆ·ç«¯ä¸»èŠ‚ç‚¹å·²æ›´æ”¹</li>
                    </ol>
                </div>
            </div>
            <div class="mb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-3">é›†ç¾¤æ¨¡å¼ (Cluster)</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>redis.conf é›†ç¾¤é…ç½®ç¤ºä¾‹</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <div class="code-content">
                        <pre><code># å¯ç”¨é›†ç¾¤æ¨¡å¼
cluster-enabled yes

# é›†ç¾¤é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
cluster-config-file nodes-6379.conf

# èŠ‚ç‚¹è¶…æ—¶æ—¶é—´
cluster-node-timeout 15000

# é›†ç¾¤èŠ‚ç‚¹IP
bind 0.0.0.0

# å¯ç”¨é›†ç¾¤æ€»çº¿é€šä¿¡çš„ç«¯å£
cluster-announce-port 6379
cluster-announce-bus-port 16379</code></pre>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="mermaid" id="cluster-diagram">%%{init: {'theme': 'neutral', 'themeVariables': { 'fontSize': '14px', 'fontFamily': 'Noto Sans SC, Inter, sans-serif' }}}%%
                        graph TD
                            subgraph "åˆ†ç‰‡0: 0-5460"
                                A[ä¸»èŠ‚ç‚¹0] -->|å¤åˆ¶| B[ä»èŠ‚ç‚¹0]
                            end
                            subgraph "åˆ†ç‰‡1: 5461-10922"
                                C[ä¸»èŠ‚ç‚¹1] -->|å¤åˆ¶| D[ä»èŠ‚ç‚¹1]
                            end
                            subgraph "åˆ†ç‰‡2: 10923-16383"
                                E[ä¸»èŠ‚ç‚¹2] -->|å¤åˆ¶| F[ä»èŠ‚ç‚¹2]
                            end
                            A <-->|é›†ç¾¤æ€»çº¿| C
                            A <-->|é›†ç¾¤æ€»çº¿| E
                            C <-->|é›†ç¾¤æ€»çº¿| E
                            
                            classDef shard0 fill:#f87171,stroke:#dc2626,color:white;
                            classDef shard1 fill:#818cf8,stroke:#4f46e5,color:white;
                            classDef shard2 fill:#a3e635,stroke:#65a30d,color:black;
                            
                            class A,B shard0;
                            class C,D shard1;
                            class E,F shard2;
                    </div>
                </div>
                <div class="mt-4 text-gray-700">
                    <p><strong>æ•°æ®åˆ†ç‰‡åŸç†ï¼š</strong></p>
                    <ul class="list-disc pl-6 mt-2">
                        <li>Redisé›†ç¾¤ä½¿ç”¨<span class="term tooltip">å“ˆå¸Œæ§½<span class="tooltiptext">Redisé›†ç¾¤ä½¿ç”¨16384ä¸ªå“ˆå¸Œæ§½æ¥åˆ†é…æ•°æ®ï¼Œæ¯ä¸ªé”®æ ¹æ®CRC16ç®—æ³•è®¡ç®—å‡ºä¸€ä¸ªæ§½ä½ï¼Œç„¶åæ˜ å°„åˆ°å¯¹åº”çš„èŠ‚ç‚¹ã€‚</span></span>ï¼ˆHash Slotï¼‰è¿›è¡Œæ•°æ®åˆ†ç‰‡</li>
                        <li>å…±æœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼Œå¹³å‡åˆ†é…ç»™å„ä¸ªä¸»èŠ‚ç‚¹</li>
                        <li>æ¯ä¸ªé”®é€šè¿‡CRC16(key) mod 16384è®¡ç®—å‡ºæ‰€å±çš„æ§½ä½</li>
                        <li>é›†ç¾¤æ”¯æŒåœ¨çº¿æ°´å¹³æ‰©å±•ï¼Œé€šè¿‡è¿ç§»æ§½ä½å®ç°</li>
                    </ul>
                </div>
            </div>
            <div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">äº‹åŠ¡ä¸Luaè„šæœ¬</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="code-block">
                        <div class="code-header">
                            <span>Redisäº‹åŠ¡ç¤ºä¾‹</span>
                            <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        </div>
                        <div class="code-content">
                            <pre><code>MULTI
SET account:1:balance 300
SET account:2:balance 700
EXEC</code></pre>
                        </div>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Luaè„šæœ¬å®ç°åˆ†å¸ƒå¼é”ç»­æœŸ</span>
                            <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        </div>
                        <div class="code-content">
                            <pre><code>-- åˆ†å¸ƒå¼é”ç»­æœŸè„šæœ¬
-- KEYS[1]: é”çš„é”®å
-- ARGV[1]: é”çš„å€¼ï¼ˆé€šå¸¸æ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰
-- ARGV[2]: æ–°çš„è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰

if redis.call('get', KEYS[1]) == ARGV[1] then
  return redis.call('expire', KEYS[1], ARGV[2])
else
  return 0
end</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="use-cases" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">åº”ç”¨åœºæ™¯</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-2">å“¨å…µæ¨¡å¼åº”ç”¨åœºæ™¯</h3>
                    <ul class="list-disc pl-6 text-gray-600">
                        <li>ä¸­å°å‹åº”ç”¨éœ€è¦é«˜å¯ç”¨ä½†æ•°æ®é‡ä¸å¤§</li>
                        <li>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯</li>
                        <li>è¯»å¤šå†™å°‘çš„ä¸šåŠ¡åœºæ™¯</li>
                        <li>å®ä¾‹ï¼šç”µå•†ç½‘ç«™çš„å•†å“ç¼“å­˜ã€ä¼šè¯å­˜å‚¨</li>
                    </ul>
                    <div class="mt-4">
                        <div class="code-block">
                            <div class="code-header">
                                <span>Javaå®¢æˆ·ç«¯è¿æ¥å“¨å…µç¤ºä¾‹</span>
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                            </div>
                            <div class="code-content">
                                <pre><code>Set<String> sentinels = new HashSet<>();
sentinels.add("127.0.0.1:26379");
sentinels.add("127.0.0.1:26380");
sentinels.add("127.0.0.1:26381");

JedisSentinelPool pool = new JedisSentinelPool(
    "mymaster", sentinels, config);

try (Jedis jedis = pool.getResource()) {
    jedis.set("key", "value");
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-2">é›†ç¾¤æ¨¡å¼åº”ç”¨åœºæ™¯</h3>
                    <ul class="list-disc pl-6 text-gray-600">
                        <li>å¤§å‹åº”ç”¨éœ€è¦æ¨ªå‘æ‰©å±•å­˜å‚¨å®¹é‡</li>
                        <li>éœ€è¦å¤„ç†é«˜å¹¶å‘è¯»å†™çš„åœºæ™¯</li>
                        <li>æ•°æ®é‡å¤§ä¸”æŒç»­å¢é•¿çš„ä¸šåŠ¡</li>
                        <li>å®ä¾‹ï¼šç¤¾äº¤åª’ä½“çš„ç”¨æˆ·æ•°æ®ã€æ¸¸æˆæ’è¡Œæ¦œ</li>
                    </ul>
                    <div class="mt-4">
                        <div class="code-block">
                            <div class="code-header">
                                <span>Javaå®¢æˆ·ç«¯è¿æ¥é›†ç¾¤ç¤ºä¾‹</span>
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                            </div>
                            <div class="code-content">
                                <pre><code>Set<HostAndPort> nodes = new HashSet<>();
nodes.add(new HostAndPort("127.0.0.1", 7001));
nodes.add(new HostAndPort("127.0.0.1", 7002));
nodes.add(new HostAndPort("127.0.0.1", 7003));

JedisCluster cluster = new JedisCluster(nodes);
cluster.set("key", "value");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="comparison" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">æ¯”è¾ƒåˆ†æ</h2>
            <div class="overflow-x-auto bg-white rounded-lg shadow-sm border border-gray-200">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>å“¨å…µæ¨¡å¼ (Sentinel)</th>
                            <th>é›†ç¾¤æ¨¡å¼ (Cluster)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æ•°æ®åˆ†ç‰‡</td>
                            <td>âŒ ä¸æ”¯æŒ</td>
                            <td>âœ… æ”¯æŒï¼ˆå“ˆå¸Œæ§½ï¼‰</td>
                        </tr>
                        <tr>
                            <td>æ°´å¹³æ‰©å±•</td>
                            <td>âŒ æœ‰é™ï¼ˆåªèƒ½é€šè¿‡è¯»å†™åˆ†ç¦»ï¼‰</td>
                            <td>âœ… æ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹</td>
                        </tr>
                        <tr>
                            <td>æ•…éšœè½¬ç§»</td>
                            <td>âœ… è‡ªåŠ¨ï¼ˆç”±å“¨å…µå®Œæˆï¼‰</td>
                            <td>âœ… è‡ªåŠ¨ï¼ˆç”±é›†ç¾¤èŠ‚ç‚¹å®Œæˆï¼‰</td>
                        </tr>
                        <tr>
                            <td>éƒ¨ç½²å¤æ‚åº¦</td>
                            <td>ä¸­ç­‰</td>
                            <td>è¾ƒé«˜</td>
                        </tr>
                        <tr>
                            <td>å¤šé”®æ“ä½œ</td>
                            <td>âœ… æ”¯æŒ</td>
                            <td>âŒ æœ‰é™ï¼ˆä»…åŒæ§½ä½çš„é”®ï¼‰</td>
                        </tr>
                        <tr>
                            <td>äº‹åŠ¡æ”¯æŒ</td>
                            <td>âœ… å®Œå…¨æ”¯æŒ</td>
                            <td>âŒ æœ‰é™ï¼ˆä»…åŒæ§½ä½çš„é”®ï¼‰</td>
                        </tr>
                        <tr>
                            <td>å†…å­˜ä½¿ç”¨</td>
                            <td>è¾ƒå°‘</td>
                            <td>è¾ƒå¤šï¼ˆé›†ç¾¤å…ƒæ•°æ®ï¼‰</td>
                        </tr>
                        <tr>
                            <td>é€‚ç”¨æ•°æ®é‡</td>
                            <td>å°è‡³ä¸­ç­‰</td>
                            <td>ä¸­ç­‰è‡³å¤§å‹</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="mt-6">
                <h3 class="text-xl font-bold text-gray-800 mb-3">å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-2">å†…å­˜æ·˜æ±°ç­–ç•¥</h4>
                        <ul class="list-disc pl-6 text-gray-600">
                            <li><strong>noeviction</strong>ï¼šä¸æ·˜æ±°ï¼Œå†…å­˜æ»¡æ—¶è¿”å›é”™è¯¯</li>
                            <li><strong>allkeys-lru</strong>ï¼šæ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®</li>
                            <li><strong>volatile-lru</strong>ï¼šæ·˜æ±°è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„</li>
                            <li><strong>allkeys-lfu</strong>ï¼šæ·˜æ±°ä½¿ç”¨é¢‘ç‡æœ€ä½çš„é”®</li>
                            <li><strong>volatile-lfu</strong>ï¼šæ·˜æ±°è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­ä½¿ç”¨é¢‘ç‡æœ€ä½çš„</li>
                            <li><strong>allkeys-random</strong>ï¼šéšæœºæ·˜æ±°é”®</li>
                            <li><strong>volatile-random</strong>ï¼šéšæœºæ·˜æ±°è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®</li>
                            <li><strong>volatile-ttl</strong>ï¼šæ·˜æ±°å³å°†è¿‡æœŸçš„é”®</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-2">å¤§Keyå’Œçƒ­Keyé—®é¢˜</h4>
                        <p class="text-gray-600 mb-2">å¤§Keyï¼šå•ä¸ªé”®å ç”¨å¤§é‡å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´ï¼š</p>
                        <ul class="list-disc pl-6 text-gray-600 mb-4">
                            <li>å†…å­˜ä½¿ç”¨ä¸å‡è¡¡</li>
                            <li>ç½‘ç»œå¸¦å®½å ç”¨é«˜</li>
                            <li>é˜»å¡Redisä¸»çº¿ç¨‹</li>
                        </ul>
                        <p class="text-gray-600 mb-2">çƒ­Keyï¼šé¢‘ç¹è®¿é—®çš„é”®ï¼Œå¯èƒ½å¯¼è‡´ï¼š</p>
                        <ul class="list-disc pl-6 text-gray-600">
                            <li>å•èŠ‚ç‚¹è´Ÿè½½è¿‡é«˜</li>
                            <li>ç½‘ç»œæµé‡ä¸å‡è¡¡</li>
                            <li>å½±å“æ•´ä½“æ€§èƒ½</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-6">
                    <h4 class="text-lg font-medium text-gray-900 mb-2">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Pipelineæ‰¹é‡æ“ä½œç¤ºä¾‹</span>
                            <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        </div>
                        <div class="code-content">
                            <pre><code>// ä½¿ç”¨Pipelineæ‰¹é‡æ“ä½œ
Pipeline pipeline = jedis.pipelined();
for (int i = 0; i < 10000; i++) {
    pipeline.set("key" + i, "value" + i);
}
// ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰å‘½ä»¤å¹¶è·å–ç»“æœ
List&lt;Object&gt; results = pipeline.syncAndReturnAll();</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="summary" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">æ€»ç»“</h2>
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
                <div class="mermaid-wrapper">
                    <pre class="mermaid text-center" id="summary-diagram">
mindmap
  root((Redisé«˜å¯ç”¨ä¸é›†ç¾¤))
    å“¨å…µæ¨¡å¼
      ç›‘æ§ä¸»ä»èŠ‚ç‚¹
      è‡ªåŠ¨æ•…éšœè½¬ç§»
      å®¢æˆ·ç«¯é€šçŸ¥
      é€‚åˆä¸­å°è§„æ¨¡åº”ç”¨
    é›†ç¾¤æ¨¡å¼
      æ•°æ®åˆ†ç‰‡
      å“ˆå¸Œæ§½åˆ†é…
      åŠ¨æ€æ‰©ç¼©å®¹
      é€‚åˆå¤§è§„æ¨¡åº”ç”¨
    å†…å­˜ç®¡ç†
      æ·˜æ±°ç­–ç•¥
      å¤§Keyä¼˜åŒ–
      çƒ­Keyå¤„ç†
    æ€§èƒ½ä¼˜åŒ–
      Pipelineæ‰¹é‡æ“ä½œ
      Luaè„šæœ¬
      æ…¢æŸ¥è¯¢åˆ†æ
                    </pre>
                </div>
            </div>
            <div class="mt-8">
                <h3 class="text-xl font-bold text-gray-800 mb-3">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="mb-4">
                        <h4 class="text-lg font-medium text-gray-900">Q: å“¨å…µæ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼å¦‚ä½•é€‰æ‹©ï¼Ÿ</h4>
                        <p class="mt-1 text-gray-600">A: å¦‚æœæ•°æ®é‡ä¸å¤§ä½†éœ€è¦é«˜å¯ç”¨ï¼Œé€‰æ‹©å“¨å…µï¼›å¦‚æœæ•°æ®é‡å¤§ä¸”éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œé€‰æ‹©é›†ç¾¤ã€‚</p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-lg font-medium text-gray-900">Q: é›†ç¾¤æ¨¡å¼ä¸‹ä¸ºä»€ä¹ˆä¸æ”¯æŒè·¨æ§½äº‹åŠ¡ï¼Ÿ</h4>
                        <p class="mt-1 text-gray-600">A: å› ä¸ºRedisé›†ç¾¤é‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œä¸åŒæ§½ä½çš„æ•°æ®å¯èƒ½åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šï¼Œæ— æ³•ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸå­æ€§ã€‚</p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-lg font-medium text-gray-900">Q: å¦‚ä½•å¤„ç†å¤§Keyé—®é¢˜ï¼Ÿ</h4>
                        <p class="mt-1 text-gray-600">A: å°†å¤§Keyæ‹†åˆ†ä¸ºå¤šä¸ªå°Keyï¼Œå¦‚å°†å¤§Hashæ‹†åˆ†ä¸ºå¤šä¸ªå°Hashï¼Œæˆ–ä½¿ç”¨åˆ†æ®µå­˜å‚¨ç­–ç•¥ã€‚</p>
                    </div>
                    <div>
                        <h4 class="text-lg font-medium text-gray-900">Q: å¦‚ä½•è§£å†³çƒ­Keyé—®é¢˜ï¼Ÿ</h4>
                        <p class="mt-1 text-gray-600">A: ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€å¢åŠ è¯»å–å‰¯æœ¬ã€ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜æˆ–å¯¹çƒ­Keyè¿›è¡Œå¤åˆ¶åˆ°å¤šä¸ªæ§½ä½ã€‚</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="references" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">å‚è€ƒèµ„æ–™</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">å®˜æ–¹æ–‡æ¡£</h3>
                    <ul class="list-disc pl-6 text-gray-600">
                        <li><a href="https://redis.io/docs/management/sentinel/" class="text-red-600 hover:underline">Redis Sentinel æ–‡æ¡£</a> / <a href="https://redis.io/docs/management/sentinel/" class="text-red-600 hover:underline">Redis Sentinel Documentation</a></li>
                        <li><a href="https://redis.io/docs/management/scaling/" class="text-red-600 hover:underline">Redis é›†ç¾¤æ–‡æ¡£</a> / <a href="https://redis.io/docs/management/scaling/" class="text-red-600 hover:underline">Redis Cluster Documentation</a></li>
                        <li><a href="https://redis.io/docs/management/optimization/" class="text-red-600 hover:underline">Redis ä¼˜åŒ–æŒ‡å—</a> / <a href="https://redis.io/docs/management/optimization/" class="text-red-600 hover:underline">Redis Optimization Guide</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">æ¨èå­¦ä¹ èµ„æº</h3>
                    <ul class="list-disc pl-6 text-gray-600">
                        <li><a href="https://github.com/redis/redis" class="text-red-600 hover:underline">Redis å¼€æºé¡¹ç›®</a></li>
                        <li><a href="https://redis.com/blog/" class="text-red-600 hover:underline">Redis å®˜æ–¹åšå®¢</a></li>
                        <li>ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹- ä»˜ç£Š, å¼ ç›Šå†›è‘—</li>
                        <li>ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹- é»„å¥å®è‘—</li>
                    </ul>
                </div>
            </div>
            <div class="mt-6">
                <h3 class="text-xl font-bold text-gray-800 mb-3">è¿›é˜¶å­¦ä¹ ä¸»é¢˜</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-2">Redis Stream</h4>
                        <p class="text-sm text-gray-600">Redis 5.0å¼•å…¥çš„æ•°æ®ç±»å‹ï¼Œå¯ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶æµå¤„ç†</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-2">Redis Module</h4>
                        <p class="text-sm text-gray-600">é€šè¿‡æ¨¡å—æ‰©å±•RedisåŠŸèƒ½ï¼Œå¦‚RedisJSONã€RediSearchç­‰</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-2">Redis ACL</h4>
                        <p class="text-sm text-gray-600">Redis 6.0å¼•å…¥çš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œæä¾›æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="advanced-topics" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">é«˜çº§ä¸»é¢˜</h2>
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-800 mb-3">æ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>æ…¢æŸ¥è¯¢é…ç½®ä¸åˆ†æ</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <div class="code-content">
                        <pre><code># é…ç½®æ…¢æŸ¥è¯¢æ—¥å¿—
# æ‰§è¡Œæ—¶é—´è¶…è¿‡å¤šå°‘å¾®ç§’çš„å‘½ä»¤ä¼šè¢«è®°å½•
CONFIG SET slowlog-log-slower-than 10000

# æ…¢æŸ¥è¯¢æ—¥å¿—æœ€å¤šä¿å­˜å¤šå°‘æ¡
CONFIG SET slowlog-max-len 128

# æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—
SLOWLOG GET [n]

# è·å–æ…¢æŸ¥è¯¢æ—¥å¿—é•¿åº¦
SLOWLOG LEN

# é‡ç½®æ…¢æŸ¥è¯¢æ—¥å¿—
SLOWLOG RESET</code></pre>
                    </div>
                </div>
                <p class="mt-4 text-gray-700">æ…¢æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ï¼š</p>
                <ul class="list-disc pl-6 text-gray-600 mt-2">
                    <li>é¿å…ä½¿ç”¨O(N)å¤æ‚åº¦çš„å‘½ä»¤å¤„ç†å¤§é‡æ•°æ®ï¼Œå¦‚KEYSã€LRANGEã€SMEMBERSç­‰</li>
                    <li>ä½¿ç”¨SCANç³»åˆ—å‘½ä»¤ä»£æ›¿KEYSå‘½ä»¤</li>
                    <li>åˆç†è®¾ç½®æ•°æ®è¿‡æœŸæ—¶é—´ï¼Œé¿å…å®ä¾‹ä¸­å­˜åœ¨è¿‡å¤šæ•°æ®</li>
                    <li>ä½¿ç”¨Pipelineæ‰¹é‡å¤„ç†å‘½ä»¤ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ—¶é—´</li>
                </ul>
            </div>
            <div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">Redisäº‹åŠ¡çš„ACIDç‰¹æ€§</h3>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <p class="text-gray-700 mb-4">Redisäº‹åŠ¡æä¾›äº†ä¸€ç§å°†å¤šä¸ªå‘½ä»¤æ‰“åŒ…ï¼Œç„¶åä¸€æ¬¡æ€§ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œçš„æœºåˆ¶ã€‚ä½†ä¸ä¼ ç»Ÿæ•°æ®åº“çš„äº‹åŠ¡ç›¸æ¯”ï¼ŒRedisäº‹åŠ¡çš„ACIDç‰¹æ€§æœ‰æ‰€å¼±åŒ–ï¼š</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-2">Redisäº‹åŠ¡æ”¯æŒçš„ç‰¹æ€§</h4>
                            <ul class="list-disc pl-6 text-gray-600">
                                <li><strong>åŸå­æ€§(Atomicity)</strong>ï¼šéƒ¨åˆ†æ”¯æŒï¼Œæ‰€æœ‰å‘½ä»¤è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œï¼Œä½†å‘½ä»¤æ‰§è¡Œé”™è¯¯ä¸ä¼šå¯¼è‡´å›æ»š</li>
                                <li><strong>éš”ç¦»æ€§(Isolation)</strong>ï¼šå®Œå…¨æ”¯æŒï¼Œäº‹åŠ¡æ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-2">Redisäº‹åŠ¡ä¸æ”¯æŒçš„ç‰¹æ€§</h4>
                            <ul class="list-disc pl-6 text-gray-600">
                                <li><strong>ä¸€è‡´æ€§(Consistency)</strong>ï¼šä¸ä¿è¯ï¼Œè¯­æ³•é”™è¯¯ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å¤±è´¥ï¼Œè¿è¡Œæ—¶é”™è¯¯ä¸ä¼šå½±å“å…¶ä»–å‘½ä»¤æ‰§è¡Œ</li>
                                <li><strong>æŒä¹…æ€§(Durability)</strong>ï¼šå–å†³äºæŒä¹…åŒ–é…ç½®ï¼Œä¸æ˜¯äº‹åŠ¡æœ¬èº«çš„ç‰¹æ€§</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-4">
                        <h4 class="text-lg font-medium text-gray-900 mb-2">ä½¿ç”¨Luaè„šæœ¬æ›¿ä»£äº‹åŠ¡</h4>
                        <p class="text-gray-600">Luaè„šæœ¬æä¾›äº†æ¯”Redisäº‹åŠ¡æ›´å¼ºçš„åŸå­æ€§ä¿è¯ï¼Œå› ä¸ºè„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œä¸”æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ã€‚å¯¹äºéœ€è¦æ¡ä»¶åˆ¤æ–­å’Œå¤æ‚é€»è¾‘çš„åœºæ™¯ï¼ŒLuaè„šæœ¬æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="bg-gray-50 py-8 px-4 sm:px-6 lg:px-8 border-t border-gray-200 mt-12">
        <div class="max-w-4xl mx-auto text-center">
            <p class="text-gray-500 text-sm">Â© 2023 Redisé«˜å¯ç”¨ä¸é›†ç¾¤æŠ€æœ¯è¯¦è§£ | æœ¬æ–‡æ¡£ä»…ä¾›å­¦ä¹ å‚è€ƒ</p>
            <p class="text-gray-400 text-xs mt-2">æœ€åæ›´æ–°: 2023-11-30</p>
        </div>
    </footer>
    <script>
        // é‡å†™Mermaidåˆå§‹åŒ–éƒ¨åˆ† - ä½¿ç”¨æ›´ç®€å•ã€æ›´ç›´æ¥çš„æ–¹å¼
        document.addEventListener('DOMContentLoaded', function() {
            // å…ˆè¿›è¡ŒåŸºç¡€é…ç½®
            mermaid.initialize({
                startOnLoad: false,
                theme: 'default',
                securityLevel: 'loose',
                fontFamily: 'Noto Sans SC, Inter, sans-serif',
            });
            
            // æ»šåŠ¨äº‹ä»¶ç›‘å¬
            window.addEventListener('scroll', updateProgressBar);
            
            // ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½åå†å°è¯•æ¸²æŸ“
            setTimeout(function() {
                console.log("å¼€å§‹æ¸²æŸ“Mermaidå›¾è¡¨...");
                
                try {
                    // å…ˆæ¸…é™¤æ‰€æœ‰å·²å¤„ç†æ ‡è®°
                    document.querySelectorAll('.mermaid').forEach(diagram => {
                        if(diagram.hasAttribute('data-processed')) {
                            diagram.removeAttribute('data-processed');
                        }
                    });
                    
                    // æ‰‹åŠ¨æ¸²æŸ“æ¯ä¸ªå›¾è¡¨
                    let sentinel = document.getElementById('sentinel-diagram');
                    let cluster = document.getElementById('cluster-diagram');
                    let summary = document.getElementById('summary-diagram');
                    
                    if(sentinel) mermaid.render('sentinel-svg', sentinel.textContent).then(result => {
                        sentinel.innerHTML = result.svg;
                    }).catch(err => console.error('å“¨å…µå›¾æ¸²æŸ“é”™è¯¯:', err));
                    
                    if(cluster) mermaid.render('cluster-svg', cluster.textContent).then(result => {
                        cluster.innerHTML = result.svg;
                    }).catch(err => console.error('é›†ç¾¤å›¾æ¸²æŸ“é”™è¯¯:', err));
                    
                    if(summary) {
                        console.log("å°è¯•æ¸²æŸ“æ€ç»´å¯¼å›¾ï¼Œå†…å®¹:", summary.textContent);
                        mermaid.render('summary-svg', summary.textContent).then(result => {
                            summary.innerHTML = result.svg;
                            
                            // åº”ç”¨æ€ç»´å¯¼å›¾æ ·å¼
                            setTimeout(() => {
                                const svg = summary.querySelector('svg');
                                if (svg) {
                                    svg.style.width = '100%';
                                    svg.style.maxWidth = '100%';
                                    svg.style.maxHeight = '500px';
                                    
                                    // æ ·å¼æ ¹èŠ‚ç‚¹
                                    const rootNode = svg.querySelector('.mindmap-node.root');
                                    if (rootNode) {
                                        const circle = rootNode.querySelector('circle');
                                        if (circle) {
                                            circle.setAttribute('fill', '#dc2626');
                                            circle.setAttribute('stroke', '#b91c1c');
                                        }
                                        
                                        const text = rootNode.querySelector('text');
                                        if (text) {
                                            text.setAttribute('fill', 'white');
                                            text.style.fontWeight = 'bold';
                                        }
                                    }
                                }
                            }, 100);
                        }).catch(err => {
                            console.error('æ€ç»´å¯¼å›¾æ¸²æŸ“é”™è¯¯:', err);
                            
                            // å¤‡ç”¨æ–¹æ¡ˆï¼šä½¿ç”¨ç®€å•ç‰ˆæœ¬é‡è¯•
                            try {
                                const simpleVersion = `
mindmap
  root((Redisé«˜å¯ç”¨ä¸é›†ç¾¤))
    å“¨å…µæ¨¡å¼
      ç›‘æ§ä¸»ä»èŠ‚ç‚¹
      è‡ªåŠ¨æ•…éšœè½¬ç§»
    é›†ç¾¤æ¨¡å¼
      æ•°æ®åˆ†ç‰‡
      å“ˆå¸Œæ§½åˆ†é…
    å†…å­˜ç®¡ç†
      æ·˜æ±°ç­–ç•¥
      å¤§Keyä¼˜åŒ–
    æ€§èƒ½ä¼˜åŒ–
      Pipelineæ‰¹é‡æ“ä½œ
      Luaè„šæœ¬`;
                                
                                mermaid.render('summary-svg-backup', simpleVersion).then(result => {
                                    summary.innerHTML = result.svg;
                                });
                            } catch(backupErr) {
                                console.error('å¤‡ç”¨æ€ç»´å¯¼å›¾ä¹Ÿå¤±è´¥:', backupErr);
                                // æœ€ç»ˆå¤‡ç”¨ï¼šæ˜¾ç¤ºç®€å•æ–‡æœ¬åˆ—è¡¨
                                summary.innerHTML = `
<div class="p-4">
    <h3 class="font-bold text-lg mb-2">Redisé«˜å¯ç”¨ä¸é›†ç¾¤</h3>
    <ul class="list-disc pl-5">
        <li class="mb-2"><strong>å“¨å…µæ¨¡å¼</strong>: ç›‘æ§ä¸»ä»èŠ‚ç‚¹ã€è‡ªåŠ¨æ•…éšœè½¬ç§»</li>
        <li class="mb-2"><strong>é›†ç¾¤æ¨¡å¼</strong>: æ•°æ®åˆ†ç‰‡ã€å“ˆå¸Œæ§½åˆ†é…</li>
        <li class="mb-2"><strong>å†…å­˜ç®¡ç†</strong>: æ·˜æ±°ç­–ç•¥ã€å¤§Keyä¼˜åŒ–</li>
        <li class="mb-2"><strong>æ€§èƒ½ä¼˜åŒ–</strong>: Pipelineæ‰¹é‡æ“ä½œã€Luaè„šæœ¬</li>
    </ul>
</div>`;
                            }
                        });
                    }
                } catch(e) {
                    console.error('Mermaidå…¨å±€åˆå§‹åŒ–é”™è¯¯:', e);
                }
            }, 800);
        });

        // ä¼˜åŒ–çš„å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(button) {
            const codeBlock = button.parentElement.nextElementSibling;
            const code = codeBlock.textContent;
            
            // æ·»åŠ å¤åˆ¶ä¸­è§†è§‰åé¦ˆ
            button.classList.add('copied');
            
            // åˆ›å»ºä¸´æ—¶textareaå…ƒç´ æ¥å¤åˆ¶å†…å®¹
            const textarea = document.createElement('textarea');
            textarea.value = code;
            textarea.setAttribute('readonly', '');
            textarea.style.position = 'absolute';
            textarea.style.left = '-9999px';
            document.body.appendChild(textarea);
            
            // é€‰æ‹©å¹¶å¤åˆ¶æ–‡æœ¬
            textarea.select();
            try {
                const successful = document.execCommand('copy');
                const originalText = button.textContent;
                button.textContent = 'å·²å¤åˆ¶!';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                button.textContent = 'å¤åˆ¶å¤±è´¥';
                button.classList.remove('copied');
                setTimeout(() => {
                    button.textContent = 'å¤åˆ¶';
                }, 2000);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            }
            
            // ç§»é™¤ä¸´æ—¶å…ƒç´ 
            document.body.removeChild(textarea);
        }
        
        // è¿›åº¦æ¡åŠŸèƒ½
        function updateProgressBar() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
            const clientHeight = document.documentElement.clientHeight || window.innerHeight;
            const scrollPercentage = (scrollTop / (scrollHeight - clientHeight)) * 100;
            document.getElementById('progressBar').style.width = scrollPercentage + '%';
        }
        
        // çª—å£å¤§å°æ”¹å˜æ—¶æ›´æ–°
        window.addEventListener('resize', function() {
            updateProgressBar();
            
            // é˜²æŠ–åŠ¨å¤„ç†
            clearTimeout(window.resizeTimer);
            window.resizeTimer = setTimeout(function() {
                // å¦‚æœå®½åº¦å˜åŒ–è¶…è¿‡ä¸€å®šå€¼ï¼Œé‡æ–°æ¸²æŸ“å›¾è¡¨
                if(window.lastWidth && Math.abs(window.lastWidth - window.innerWidth) > 100) {
                    location.reload(); // ç®€å•ä½†æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ
                }
                window.lastWidth = window.innerWidth;
            }, 500);
        });

        // æ–¹å‘å˜åŒ–æ—¶ä¹Ÿé‡æ–°æ¸²æŸ“
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                updateProgressBar();
                location.reload(); // é‡æ–°åŠ è½½é¡µé¢ä»¥ç¡®ä¿å›¾è¡¨æ¸²æŸ“æ­£ç¡®
            }, 500);
        });
    </script>
</body>
</html>